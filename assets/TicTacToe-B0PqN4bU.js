import{r as m,j as d,C as g,B as v}from"./index-BsGnYwCs.js";function w({connection:e,isInitiator:l}){const[r,a]=m.useState(Array(9).fill(null)),[s,o]=m.useState(l),u=l?"X":"O",f=l?"O":"X";m.useEffect(()=>{if(!e)return;const t=n=>{try{const i=JSON.parse(n.data);if(i.type==="MOVE"){const c=[...r];c[i.index]=f,a(c),o(!0)}else i.type==="RESET"&&(a(Array(9).fill(null)),o(l))}catch(i){console.error("Error parsing message",i)}};return e.dataChannel&&e.dataChannel.addEventListener("message",t),()=>{e.dataChannel&&e.dataChannel.removeEventListener("message",t)}},[e,r,s]);const y=t=>{if(!s||r[t]||h(r))return;const n=[...r];n[t]=u,a(n),o(!1),e&&e.dataChannel&&e.dataChannel.readyState==="open"&&e.send(JSON.stringify({type:"MOVE",index:t}))},b=()=>{a(Array(9).fill(null)),o(l),e&&e.dataChannel&&e.dataChannel.readyState==="open"&&e.send(JSON.stringify({type:"RESET"}))},p=h(r),x=p?p===u?"You Won!":"Opponent Won!":r.every(Boolean)?"Draw!":s?"Your Turn":"Opponent's Turn";return d.jsxs(g,{className:"p-6 flex flex-col items-center space-y-4 bg-white/50 backdrop-blur-sm border-2 border-primary/20 shadow-xl rounded-2xl",children:[d.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Tic-Tac-Toe"}),d.jsx("div",{className:`text-lg font-medium ${s?"text-green-600 animate-pulse":"text-gray-500"}`,children:x}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((t,n)=>d.jsx("button",{onClick:()=>y(n),disabled:!s||!!t||!!p,className:`w-20 h-20 text-3xl font-black rounded-xl transition-all duration-200 border-2 
              ${t==="X"?"text-blue-600 border-blue-200 bg-blue-50":t==="O"?"text-rose-600 border-rose-200 bg-rose-50":"hover:bg-primary/5 hover:border-primary/30 border-gray-100 bg-white"}
              ${!s&&!t?"opacity-50 cursor-not-allowed":""}
              flex items-center justify-center shadow-sm hover:shadow-md active:scale-95`,children:t},n))}),(p||r.every(Boolean))&&d.jsx(v,{onClick:b,variant:"outline",className:"mt-4 hover:bg-primary hover:text-white transition-colors",children:"Play Again"})]})}function h(e){const l=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let r=0;r<l.length;r++){const[a,s,o]=l[r];if(e[a]&&e[a]===e[s]&&e[a]===e[o])return e[a]}return null}export{w as default};
