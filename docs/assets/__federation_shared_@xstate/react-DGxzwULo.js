import{i as R}from"../_virtual___federation_fn_import-PdSsH34n.js";import{r as z}from"../index-X3XXanGI.js";const{useLayoutEffect:T}=await R("react");var Y=T,g={exports:{}},x={},_={exports:{}},C={};var q;function F(){if(q)return C;q=1;var e=z();function t(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,u=e.useEffect,i=e.useLayoutEffect,p=e.useDebugValue;function a(o,s){var l=s(),d=n({inst:{value:l,getSnapshot:s}}),c=d[0].inst,m=d[1];return i(function(){c.value=l,c.getSnapshot=s,S(c)&&m({inst:c})},[o,l,s]),u(function(){return S(c)&&m({inst:c}),o(function(){S(c)&&m({inst:c})})},[o]),p(l),l}function S(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!r(o,l)}catch{return!0}}function f(o,s){return s()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return C.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,C}var I;function G(){return I||(I=1,_.exports=F()),_.exports}var $;function H(){if($)return x;$=1;var e=z(),t=G();function r(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:r,u=t.useSyncExternalStore,i=e.useRef,p=e.useEffect,a=e.useMemo,S=e.useDebugValue;return x.useSyncExternalStoreWithSelector=function(f,h,o,s,l){var d=i(null);if(d.current===null){var c={hasValue:!1,value:null};d.current=c}else c=d.current;d=a(function(){function P(v){if(!V){if(V=!0,E=v,v=s(v),l!==void 0&&c.hasValue){var y=c.value;if(l(y,v))return b=y}return b=v}if(y=b,n(E,v))return y;var k=s(v);return l!==void 0&&l(y,k)?(E=v,y):(E=v,b=k)}var V=!1,E,b,W=o===void 0?null:o;return[function(){return P(h())},W===null?void 0:function(){return P(W())}]},[h,o,s,l]);var m=u(f,d[0],d[1]);return p(function(){c.hasValue=!0,c.value=m},[m]),S(m),m},x}var D;function J(){return D||(D=1,g.exports=H()),g.exports}var K=J(),Q=G();const O=await R("react"),{useEffect:A,useState:X,useCallback:w}=await R("react"),{toObserver:Z,createActor:M}=await R("xstate"),N=(e,t)=>{t(e);const r=e.getSnapshot().children;r&&Object.values(r).forEach(n=>{N(n,t)})};function U(e){const t=[];N(e,n=>{t.push([n,n.getSnapshot()]),n.observers=new Set});const r=e.system.getSnapshot?.();e.stop(),e.system._snapshot=r,t.forEach(([n,u])=>{n._processingStatus=0,n._snapshot=u})}function L(e,...[t]){let[[r,n],u]=X(()=>{const i=M(e,t);return[e.config,i]});if(e.config!==r){const i=M(e,{...t,snapshot:n.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});u([e.config,i]),n=i}return Y(()=>{n.logic.implementations=e.implementations}),n}function B(e,...[t,r]){const n=L(e,t);return A(()=>{if(!r)return;const u=n.subscribe(Z(r));return()=>{u.unsubscribe()}},[r]),A(()=>(n.start(),()=>{U(n)}),[n]),n}function ee(e,t){return e===t}function te(e,t,r=ee){const n=w(p=>{if(!e)return()=>{};const{unsubscribe:a}=e.subscribe(p);return a},[e]),u=w(()=>e?.getSnapshot(),[e]);return K.useSyncExternalStoreWithSelector(n,u,u,t,r)}function oe(e,t){const r=O.createContext(null),n=r.Provider;function u({children:a,logic:S=e,machine:f,options:h}){if(f)throw new Error('The "machine" prop has been deprecated. Please use "logic" instead.');const o=B(S,{...t,...h});return O.createElement(n,{value:o,children:a})}u.displayName="ActorProvider";function i(){const a=O.useContext(r);if(!a)throw new Error(`You used a hook from "${u.displayName}" but it's not inside a <${u.displayName}> component.`);return a}function p(a,S){const f=i();return te(f,a,S)}return{Provider:u,useActorRef:i,useSelector:p}}function j(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function se(e,t){if(j(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let u=0;u<r.length;u++)if(!Object.prototype.hasOwnProperty.call(t,r[u])||!j(e[r[u]],t[r[u]]))return!1;return!0}function re(e,...[t]){const r=L(e,t),n=w(()=>r.getSnapshot(),[r]),u=w(p=>{const{unsubscribe:a}=r.subscribe(p);return a},[r]),i=Q.useSyncExternalStore(u,n,n);return A(()=>(r.start(),()=>{U(r)}),[r]),[i,r.send,r]}function ce(e,...[t]){return re(e,t)}export{oe as createActorContext,se as shallowEqual,re as useActor,B as useActorRef,ce as useMachine,te as useSelector};
