import{importShared as F}from"./__federation_fn_import-CrSc7WPK.js";import{j as t}from"./jsx-runtime-u17CrQMm.js";const Y=(e,s)=>{if(s==="NONE")return 0;if(s==="TOTAL_SUM")return Object.values(e.baseAttributes).reduce((o,i)=>o+i,0)+Object.values(e.mutationModifiers).reduce((o,i)=>o+i,0)+Object.values(e.tempAttributeModifiers).reduce((o,i)=>o+i,0);const a=Array.isArray(s)?s:[s];let r=0;return a.forEach(o=>{const i=e.baseAttributes?.[o]||0,c=e.mutationModifiers?.[o]||0,n=e.tempAttributeModifiers?.[o]||0;r+=i+c+n}),r},Z=e=>()=>{e|=0,e=e+1831565813|0;let s=Math.imul(e^e>>>15,1|e);return s=s+Math.imul(s^s>>>7,61|s)|0,((s^s>>>14)>>>0)/4294967296},te=(e,s)=>Math.floor(e()*s)+1,ge=e=>e.dataClusters>=30||!!e.hasPassedSingularity,Ye=(e,s,a,r)=>(Math.abs(e-a)+Math.abs(e+s-a-r)+Math.abs(s-r))/2,ue=(e,s)=>{const a=[...e];for(let r=a.length-1;r>0;r--){const o=Math.floor(s()*(r+1));[a[r],a[o]]=[a[o],a[r]]}return a},Ae=e=>{const s=Object.values(e.baseAttributes).reduce((a,r)=>a+r,0);return 1+Math.max(0,Math.floor((s-12)/2))},ct=(e=12345)=>{const s=[],r=Z(e),o=["Supernova","PulsarArchive","GravityWell","CoreDatabase","SingularityShard","SingularityShard"],i=["SolarFlare","SolarFlare","DeepBuoy","DeepBuoy","IonCloud","IonCloud","SystemCache","SystemCache","EncryptedRelay","EncryptedRelay","EncryptedRelay","EncryptedRelay"],c=["ScrapHeap","ScrapHeap","ScrapHeap","SignalPing","SignalPing","SignalPing","GravityEddy","GravityEddy","GravityEddy","LogicFragment","LogicFragment","LogicFragment","DataCluster","DataCluster","DataCluster","DataCluster","DataCluster","DataCluster"],n=ue(o,r),u=ue(i,r),p=ue(c,r);let g=0,h=0,d=0;for(let f=-4;f<=4;f++)for(let m=Math.max(-4,-f-4);m<=Math.min(4,-f+4);m++){const k=Math.max(Math.abs(f),Math.abs(m),Math.abs(-f-m)),N=`H-${f}-${m}`;let y="ScrapHeap",S=0,j={matter:0,data:0},l="DEF";if(k===0)y="Singularity",S=8,j={matter:0,data:0},l=["LOG","SCN"];else if(k===1)y=n[g++],S=6,y==="Supernova"?(l="DEF",j={matter:4,data:0}):y==="PulsarArchive"?(l="SCN",j={matter:0,data:4}):y==="GravityWell"?(l="NAV",j={matter:4,data:0}):y==="CoreDatabase"?(l="LOG",j={matter:0,data:4}):y==="SingularityShard"&&(l=["NAV","LOG","DEF","SCN"],j={matter:4,data:4});else if(k===2)y=u[h++],S=4,y==="SolarFlare"?(l="DEF",j={matter:2,data:0}):y==="DeepBuoy"?(l="SCN",j={matter:0,data:2}):y==="IonCloud"?(l="NAV",j={matter:2,data:0}):y==="SystemCache"?(l="LOG",j={matter:0,data:2}):y==="EncryptedRelay"&&(l=["LOG","NAV"],j={matter:2,data:2});else if(k===3)y=p[d++],S=2,y==="ScrapHeap"?(l="DEF",j={matter:1,data:0}):y==="SignalPing"?(l="SCN",j={matter:0,data:1}):y==="GravityEddy"?(l="NAV",j={matter:1,data:0}):y==="LogicFragment"?(l="LOG",j={matter:0,data:1}):y==="DataCluster"&&(l="LOG",j={matter:1,data:1});else if(k===4)if(f===4&&m===-2||f===-2&&m===4||f===-4&&m===2||f===2&&m===-4)y="HomeNebula",S=0,j={matter:0,data:0};else continue;s.push({id:N,type:y,threshold:S,yield:j,targetAttribute:l,x:f,y:m})}return s},ie={NAV:"#3b82f6",LOG:"#06b6d4",DEF:"#ef4444",SCN:"#10b981",MULTI:"#818cf8",HOME:"#ffffff",SINGULARITY:"#f0abfc"},dt=e=>e.type==="Singularity"?ie.SINGULARITY:e.type==="HomeNebula"?ie.HOME:Array.isArray(e.targetAttribute)?ie.MULTI:ie[e.targetAttribute]||"#94a3b8",pt=({hexGrid:e,pieces:s,playerColors:a,onHexClick:r,currentHexId:o,maxDistance:i})=>{const c=e.find(n=>n.id===o);return t.jsxs("div",{className:"relative w-full aspect-square max-w-4xl mx-auto p-12 bg-slate-900/50 rounded-[3rem] border border-white/5 backdrop-blur-2xl shadow-2xl ring-1 ring-white/5 group overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(99,102,241,0.05),transparent)] pointer-events-none"}),t.jsxs("svg",{viewBox:"-450 -450 900 900",className:"w-full h-full drop-shadow-[0_0_50px_rgba(0,0,0,0.5)]",children:[t.jsxs("g",{className:"opacity-10",children:[t.jsx("circle",{cx:"0",cy:"0",r:"120",fill:"none",stroke:"white",strokeWidth:"0.5",strokeDasharray:"4 8"}),t.jsx("circle",{cx:"0",cy:"0",r:"230",fill:"none",stroke:"white",strokeWidth:"0.5",strokeDasharray:"2 12"}),t.jsx("circle",{cx:"0",cy:"0",r:"340",fill:"none",stroke:"white",strokeWidth:"0.5",strokeDasharray:"1 16"})]}),e.map(n=>{const g=n.x*90.09000000000002,h=(n.y+n.x/2)*(Math.sqrt(3)*57.2*1.05),d=[];for(let j=0;j<6;j++){const l=j*60*Math.PI/180;d.push(`${g+57.2*Math.cos(l)},${h+57.2*Math.sin(l)}`)}const f=n.type==="Singularity",m=n.type==="HomeNebula",k=dt(n),y=(c&&i!==void 0?Ye(c.x,c.y,n.x,n.y):1/0)<=(i||0),S=o===n.id;return t.jsxs("g",{onClick:()=>r(n.id),className:"cursor-pointer group/hex transition-all duration-500",children:[t.jsx("polygon",{points:d.join(" "),className:`transition-all duration-700 ${f?"fill-indigo-500/20":"fill-transparent hover:fill-white/5"}`}),t.jsx("polygon",{points:d.join(" "),style:{stroke:k},className:`transition-all duration-300 stroke-[1.5] group-hover/hex:stroke-[3.5]
                                    ${f?"opacity-100 shadow-[0_0_20px_rgba(129,140,248,0.5)]":m?"opacity-40":"opacity-80 group-hover/hex:opacity-100"}
                                    ${y&&!S?"stroke-[4] stroke-white drop-shadow-[0_0_8px_white]":""}`}),!m&&t.jsx("circle",{cx:g,cy:h,r:"2",style:{fill:k}}),!m&&t.jsx("text",{x:g,y:h-28,textAnchor:"middle",style:{fill:k},className:"text-[8px] font-black uppercase tracking-widest pointer-events-none select-none",children:n.type.split(/(?=[A-Z])/).map((j,l)=>t.jsx("tspan",{x:g,dy:l===0?0:8,children:j},l))}),!m&&t.jsxs("g",{transform:`translate(${g}, ${h})`,children:[n.yield.matter>0&&t.jsxs("g",{transform:"translate(-32, 0)",children:[t.jsx("rect",{x:"-8",y:"-8",width:"16",height:"16",rx:"2",className:"fill-amber-500/80"}),t.jsx("text",{x:"0",y:"2",textAnchor:"middle",className:"text-[12px] font-black fill-slate-900 pointer-events-none select-none",children:n.yield.matter})]}),n.yield.data>0&&t.jsxs("g",{transform:"translate(32, 0)",children:[t.jsx("circle",{r:"8",className:"fill-cyan-500/80"}),t.jsx("text",{x:"0",y:"2",textAnchor:"middle",className:"text-[12px] font-black fill-slate-900 pointer-events-none select-none",children:n.yield.data})]})]}),!m&&t.jsxs("g",{transform:`translate(${g}, ${h+18})`,children:[t.jsx("text",{x:"0",y:"0",textAnchor:"middle",className:"text-[14px] font-black fill-white pointer-events-none select-none",children:n.threshold>0?n.threshold:""}),t.jsx("text",{x:"0",y:"10",textAnchor:"middle",className:"text-[7px] font-bold fill-slate-500 uppercase tracking-widest pointer-events-none select-none",children:Array.isArray(n.targetAttribute)?n.targetAttribute.join("Â·"):n.targetAttribute})]}),s.filter(j=>j.hexId===n.id).map((j,l)=>t.jsxs("g",{className:"animate-in zoom-in-50 fade-in duration-500",children:[t.jsx("circle",{cx:g,cy:h,r:f?"35":"28",fill:"none",stroke:a[j.playerId],strokeWidth:"4",className:"opacity-20 animate-pulse"}),t.jsx("circle",{cx:g,cy:h,r:"18",fill:a[j.playerId],className:"shadow-xl"}),t.jsx("circle",{cx:g,cy:h,r:"12",fill:"white",className:"opacity-20"})]},`${j.playerId}-${l}`))]},n.id)})]})]})};const ut=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mt=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,r)=>r?r.toUpperCase():a.toLowerCase()),Ee=e=>{const s=mt(e);return s.charAt(0).toUpperCase()+s.slice(1)},qe=(...e)=>e.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim(),ht=e=>{for(const s in e)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var ft={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const{forwardRef:xt,createElement:Te}=await F("react"),gt=xt(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:c,...n},u)=>Te("svg",{ref:u,...ft,width:s,height:s,stroke:e,strokeWidth:r?Number(a)*24/Number(s):a,className:qe("lucide",o),...!i&&!ht(n)&&{"aria-hidden":"true"},...n},[...c.map(([p,g])=>Te(p,g)),...Array.isArray(i)?i:[i]]));const{forwardRef:bt,createElement:yt}=await F("react"),O=(e,s)=>{const a=bt(({className:r,...o},i)=>yt(gt,{ref:i,iconNode:s,className:qe(`lucide-${ut(Ee(e))}`,`lucide-${e}`,r),...o}));return a.displayName=Ee(e),a};const wt=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Re=O("box",wt);const vt=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],kt=O("cloud-lightning",vt);const Nt=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],jt=O("cpu",Nt);const At=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Oe=O("crown",At);const It=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Pt=O("database",It);const St=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],be=O("dice-6",St);const Ct=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],ke=O("dna",Ct);const Mt=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],_t=O("hard-drive",Mt);const Et=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Tt=O("heart",Et);const Rt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ot=O("layers",Rt);const zt=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],$t=O("navigation",zt);const Gt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Lt=O("rotate-ccw",Gt);const Ht=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dt=O("settings",Ht);const Ft=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vt=O("shield",Ft);const Ut=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Bt=O("swords",Ut);const Wt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yt=O("triangle-alert",Wt);const qt=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Kt=O("trophy",qt);const Xt=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ne=O("zap",Xt),le=[{id:"hazard-1",type:"Hazard",name:"Solar Flare",description:"Intense solar radiation testing hull integrity.",checkType:"DEF",threshold:4,effects:{onFailure:{type:"stability",amount:1,target:"self"}}},{id:"hazard-2",type:"Hazard",name:"Logic Plague",description:"Viral code fragments disrupting systems.",checkType:"LOG",threshold:5,effects:{onFailure:{type:"stat_mod_temp",amount:-1,target:"self",attribute:void 0}}},{id:"hazard-3",type:"Hazard",name:"Ion Storm",description:"Electromagnetic interference causing displacement.",checkType:"NAV",threshold:3,effects:{onFailure:{type:"displacement",amount:2,target:"self"}}},{id:"hazard-4",type:"Hazard",name:"Data Leak",description:"Signal interference purging data clusters.",checkType:"SCN",threshold:4,effects:{onFailure:{type:"data",amount:2,target:"self"}}},{id:"hazard-5",type:"Hazard",name:"Gravity Well",description:"Sudden gravitational pull increasing effort.",checkType:"NAV",threshold:5,effects:{onFailure:{type:"movement_cost",amount:2,target:"self"}}},{id:"pressure-1",type:"Pressure",name:"The Great Filter",description:"Universal threshold check.",checkType:"TOTAL_SUM",threshold:"AVG+2",effects:{onFailure:{type:"hard_reboot",target:"self"}}},{id:"pressure-2",type:"Pressure",name:"Weight Decay",description:"Entropic decay of optimized systems.",checkType:"NONE",threshold:0,effects:{global:{type:"stat_mod_perm",amount:-1,target:"highest_stat"}}},{id:"pressure-3",type:"Pressure",name:"System Heat",description:"Overheating components require matter or stability.",checkType:"DEF",threshold:5,effects:{onFailure:{type:"matter",amount:1,target:"self",details:{fallback:"stability"}}}},{id:"shift-1",type:"Shift",name:"Grid Re-Sync",description:"Spatial recalibration.",checkType:"NONE",threshold:0,effects:{global:{type:"map_shift",target:"priority",details:{action:"swap_adjacent_t2_t3"}}}},{id:"shift-2",type:"Shift",name:"Space Fold",description:"Brief window for efficient travel.",checkType:"NAV",threshold:6,effects:{onSuccess:{type:"displacement",amount:1,target:"self",details:{free:!0}}}},{id:"shift-3",type:"Shift",name:"Core Drift",description:"The singularity shifts.",checkType:"NONE",threshold:0,effects:{global:{type:"map_shift",target:"lowest_sum",details:{action:"move_singularity_toward"}}}},{id:"apex-1",type:"Apex Lead",name:"Thermal Throttle",description:"Safety protocols for high-power systems.",checkType:"DEF",threshold:6,effects:{onFailure:{type:"stability",amount:2,target:"sum_26_plus"}}},{id:"apex-2",type:"Apex Lead",name:"Data Corruption",description:"High-density storage interference.",checkType:"LOG",threshold:5,effects:{onFailure:{type:"data",amount:.5,target:"most_data",details:{fraction:!0}}}},{id:"apex-3",type:"Apex Lead",name:"Resource Leach",description:"Subtle energy drain on matter reserves.",checkType:"SCN",threshold:5,effects:{onFailure:{type:"matter",amount:3,target:"most_matter"}}},{id:"apex-4",type:"Apex Lead",name:"System Bloat",description:"Inefficient allocation of top resources.",checkType:"LOG",threshold:6,effects:{onFailure:{type:"stat_mod_perm",amount:-1,target:"highest_stat"}}},{id:"apex-5",type:"Apex Lead",name:"Parasitic Drift",description:"Siphoning data to weaker frames.",checkType:"NONE",threshold:0,effects:{global:{type:"transfer",amount:1,attribute:void 0,target:"priority",details:{from:"highest_sum",to:"lowest_sum",resource:"data"}}}},{id:"apex-6",type:"Apex Lead",name:"Overfit Fragile",description:"Strained hulls from extreme specialization.",checkType:"NAV",threshold:4,effects:{onFailure:{type:"stability",amount:1,target:"stat_8_plus"}}},{id:"bonus-1",type:"Bonus",name:"Deep Scan",description:"Opportunity for extra data harvest.",checkType:"SCN",threshold:6,effects:{onSuccess:{type:"data",amount:1,target:"self"}}},{id:"bonus-2",type:"Bonus",name:"Matter Vacuum",description:"Universal resource drain.",checkType:"NONE",threshold:0,effects:{global:{type:"matter",amount:1,target:"all",details:{fallback:"stability"}}}},{id:"bonus-3",type:"Bonus",name:"Model Sync",description:"Perfect alignment of internal models.",checkType:"LOG",threshold:4,effects:{onSuccess:{type:"gain_insight",amount:1,target:"self"}}}],Zt=({deck:e,discard:s})=>t.jsxs("div",{className:"flex gap-6 items-center p-6 bg-white/5 rounded-[2rem] border border-white/5 backdrop-blur-xl",children:[t.jsxs("div",{className:"relative group cursor-help",title:`Events remaining: ${e.length}`,children:[t.jsxs("div",{className:"w-16 h-24 bg-slate-800 rounded-xl border-2 border-slate-700 flex flex-col items-center justify-center transition-all group-hover:border-purple-500/50 group-hover:bg-slate-800/80 shadow-lg",children:[t.jsx(Ot,{className:"w-6 h-6 text-slate-500 group-hover:text-purple-400 mb-1"}),t.jsx("span",{className:"text-[10px] font-black text-slate-600 group-hover:text-purple-400",children:e.length})]}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-16 h-24 bg-slate-900 rounded-xl border border-slate-800 -z-10"}),t.jsx("div",{className:"absolute -bottom-2 -right-2 w-16 h-24 bg-slate-950 rounded-xl border border-slate-900 -z-20 opacity-50"})]}),t.jsx("div",{className:"flex flex-col",children:t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Event Deck"})}),t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"relative group opacity-60 hover:opacity-100 transition-opacity cursor-help",title:`Discard pile: ${s.length}`,children:t.jsxs("div",{className:"w-16 h-24 bg-black/40 rounded-xl border-2 border-white/5 flex flex-col items-center justify-center border-dashed",children:[t.jsx(Lt,{className:"w-5 h-5 text-slate-700 mb-1"}),t.jsx("span",{className:"text-[10px] font-black text-slate-700",children:s.length})]})})]}),{createMachine:Jt,assign:C}=await F("xstate"),ce={NAV:0,LOG:0,DEF:0,SCN:0},Qt=Jt({types:{},id:"apexNebula",initial:"waitingForPlayers",context:({input:e})=>({players:e?.players??[],currentPlayerIndex:0,genomes:e?.genomes??[],pieces:e?.pieces??[],hexGrid:ct(e?.seed||12345),eventDeck:[...le],currentEvent:null,gamePhase:"waiting",round:1,isInitiator:e?.isInitiator??!1,seed:e?.seed,mutationResults:{},priorityPlayerId:"",turnOrder:[],dataSpentThisRound:{},winners:[],lastMutationRoll:null,lastHarvestRoll:null,lastHarvestSuccess:null,lastHarvestResults:[],phenotypeActions:{},confirmedPlayers:[]}),states:{waitingForPlayers:{entry:[C({gamePhase:"waiting"}),()=>console.log("Machine State: waitingForPlayers")],on:{START_GAME:{target:"setupPhase",actions:C({seed:({event:e})=>e.type==="START_GAME"?e.seed:void 0,turnOrder:({context:e})=>e.players.map(s=>s.id)})}}},setupPhase:{entry:[C({gamePhase:"setup"}),()=>console.log("Machine State: setupPhase")],on:{DISTRIBUTE_CUBES:{actions:"distributeCubes"},CONFIRM_PHASE:{actions:"confirmPhase"}},always:{target:"mutationPhase",guard:"allPlayersConfirmed",actions:"calculateInitialPriority"}},mutationPhase:{entry:[C(({event:e})=>e.type==="SYNC_STATE"?{}:{gamePhase:"mutation",currentPlayerIndex:0,confirmedPlayers:[]}),"applyAllMutations",()=>console.log("Machine State: mutationPhase (Mutations Auto-Applied)")],on:{CONFIRM_PHASE:{actions:"confirmPhase"},DISTRIBUTE_CUBES:{actions:"distributeCubes"}},always:{target:"phenotypePhase",guard:"allPlayersConfirmed"}},phenotypePhase:{entry:[C(({event:e})=>e.type==="SYNC_STATE"?{}:{gamePhase:"phenotype",confirmedPlayers:[],currentPlayerIndex:0,phenotypeActions:{}}),()=>console.log("Machine State: phenotypePhase")],on:{MOVE_PLAYER:{actions:"moveAndHarvest",guard:"canMove"},FINISH_TURN:[{target:"environmentalPhase",guard:"isLastPhenotypeTurn"},{actions:"nextPhenotypePlayer"}]}},environmentalPhase:{entry:[C({gamePhase:"environmental"}),"drawEnvironmentalEvent"],on:{NEXT_PHASE:{target:"competitivePhase",actions:"evaluateEnvironmentalFitness"}}},competitivePhase:{entry:C({gamePhase:"competitive"}),on:{HUSTLE:{actions:"resolveHustle"},NEXT_PHASE:{target:"optimizationPhase"}}},optimizationPhase:{entry:C(({event:e})=>e.type==="SYNC_STATE"?{}:{gamePhase:"optimization",confirmedPlayers:[]}),on:{OPTIMIZE_DATA:{actions:"optimizeData"},PRUNE_ATTRIBUTE:{actions:"pruneAttribute"},CONFIRM_PHASE:{actions:"confirmPhase"},DISTRIBUTE_CUBES:{actions:"distributeCubes"},NEXT_PHASE:[{target:"won",guard:"checkWin",actions:"finalizeOptimization"},{target:"nextRound",actions:"finalizeOptimization"}]},always:[{target:"won",guard:"allConfirmedAndWin",actions:"finalizeOptimization"},{target:"nextRound",guard:"allPlayersConfirmed",actions:"finalizeOptimization"}]},nextRound:{always:{target:"mutationPhase",actions:["incrementRound","updateRoundPriority"]}},won:{entry:"recordWinner",on:{RESET:{target:"mutationPhase",actions:"resetGame"}}}},on:{SYNC_STATE:[{target:".setupPhase",guard:({event:e})=>e.context.gamePhase==="setup",actions:"syncState"},{target:".mutationPhase",guard:({event:e})=>e.context.gamePhase==="mutation",actions:"syncState"},{target:".phenotypePhase",guard:({event:e})=>e.context.gamePhase==="phenotype",actions:"syncState"},{target:".environmentalPhase",guard:({event:e})=>e.context.gamePhase==="environmental",actions:"syncState"},{target:".competitivePhase",guard:({event:e})=>e.context.gamePhase==="competitive",actions:"syncState"},{target:".optimizationPhase",guard:({event:e})=>e.context.gamePhase==="optimization",actions:"syncState"},{actions:"syncState"}],FORCE_EVENT:{target:".environmentalPhase",actions:"forceEnvironmentalEvent"}}},{actions:{syncState:C(({event:e})=>e.type!=="SYNC_STATE"?{}:{...e.context,seed:e.seed??e.context.seed}),calculateInitialPriority:C(({context:e})=>{const s=Z(e.seed||12345),o=[...e.players.map(i=>{const c=e.genomes.find(g=>g.playerId===i.id),n=c.baseAttributes.NAV+c.baseAttributes.SCN,u=c.baseAttributes.LOG,p=te(s,6);return{playerId:i.id,score:n*1e4+u*100+p}})].sort((i,c)=>c.score-i.score).map(i=>i.playerId);return{turnOrder:o,priorityPlayerId:o[0],currentPlayerIndex:0}}),updateRoundPriority:C(({context:e})=>{const r=[...e.players.map(c=>{const n=e.dataSpentThisRound[c.id]||0;return{playerId:c.id,spent:n}})].sort((c,n)=>n.spent-c.spent)[0].playerId,o=e.turnOrder.indexOf(r);return{turnOrder:[...e.turnOrder.slice(o),...e.turnOrder.slice(0,o)],priorityPlayerId:r,currentPlayerIndex:0,dataSpentThisRound:{}}}),applyAllMutations:C(({context:e})=>{const s=["NAV","LOG","DEF","SCN"],a={},r=e.genomes.map((o,i)=>{const c=(e.seed??12345)+e.round+i,n=Z(c),u=te(n,4),p=s[u-1],g=te(n,6),h=g<=2?-1:g>=5?1:0;return a[o.playerId]={attr:p,magnitude:h,attrRoll:u,magRoll:g},{...o,mutationModifiers:{...o.mutationModifiers,[p]:(o.mutationModifiers[p]||0)+h}}});return console.log("Applied mutations for all players:",a),{genomes:r,mutationResults:a}}),spendInsightForReroll:C(({context:e,event:s})=>{if(s.type!=="SPEND_INSIGHT")return{};const{playerId:a,amount:r}=s,o=e.genomes.findIndex(n=>n.playerId===a);return o===-1?{}:e.genomes[o].insightTokens<r?{}:{genomes:e.genomes.map((n,u)=>u===o?{...n,insightTokens:n.insightTokens-r}:n)}}),distributeCubes:C(({context:e,event:s})=>{if(s.type!=="DISTRIBUTE_CUBES")return{};const{playerId:a,attribute:r,amount:o}=s,i=e.genomes.findIndex(g=>g.playerId===a);if(i===-1)return{};const c=e.genomes[i];if(!r)return c.cubePool-o<0&&o>0?{}:{genomes:e.genomes.map((h,d)=>d===i?{...h,cubePool:h.cubePool-o}:h)};const u=c.baseAttributes[r]+o;return u<1||u>10?{}:e.gamePhase==="setup"&&u>6?{}:e.gamePhase==="optimization"&&o<0&&r?{}:c.cubePool-o<0&&o>0?{}:{genomes:e.genomes.map((g,h)=>h===i?{...g,baseAttributes:{...g.baseAttributes,[r]:u},cubePool:g.cubePool-o}:g)}}),nextPhenotypePlayer:C(({context:e})=>({currentPlayerIndex:e.currentPlayerIndex+1})),moveAndHarvest:C(({context:e,event:s})=>{if(s.type!=="MOVE_PLAYER")return{};const{playerId:a,hexId:r}=s;console.log(`Action: moveAndHarvest for ${a} to ${r}`);const o=e.pieces.findIndex(x=>x.playerId===a);if(o===-1)return{};const i=e.hexGrid.find(x=>x.id===r);if(!i)return{};const c=e.pieces.map((x,_)=>_===o?{...x,hexId:r}:x),n=e.genomes.findIndex(x=>x.playerId===a),u=e.genomes[n],p=[],g=(e.seed||12345)+e.round+e.currentPlayerIndex+(e.phenotypeActions[a]?.movesMade||0),h=Z(g),d=Array.isArray(i.targetAttribute)?i.targetAttribute:[i.targetAttribute],f=i.yield.matter>0&&i.yield.data>0,m=f?[d[0],d[0]]:d;let k=!1,N=!1,y=!1;m.forEach((x,_)=>{const M=te(h,6),U=M<=2?-1:M<=4?0:1,ee=(u.baseAttributes[x]||0)+(u.mutationModifiers[x]||0)+U>=i.threshold;p.push({playerId:a,success:ee,attribute:x,roll:M,magnitude:U}),ee?f&&(_===0&&(N=!0),_===1&&(y=!0)):k=!0});let S=0;f?(N||S++,y||S++):k&&S++;const j=e.genomes.map(x=>{if(x.playerId!==a)return x;const _=i.type==="Singularity"&&!k,M=i.type==="Singularity"?10:0;return{...x,rawMatter:x.rawMatter+(f?N?i.yield.matter:0:k?0:i.yield.matter),dataClusters:Math.max(0,x.dataClusters-M+(f?y?i.yield.data:0:k?0:i.yield.data)),stability:Math.max(0,x.stability-S),hasPassedSingularity:x.hasPassedSingularity||_}}),l=e.phenotypeActions[a]||{movesMade:0,harvestDone:!1},b=(u.baseAttributes.NAV||0)+(u.mutationModifiers.NAV||0),I=f?2:1,E={...e.phenotypeActions,[a]:{...l,movesMade:i.type==="Singularity"&&!k?Math.max(b,l.movesMade+I):l.movesMade+I,harvestDone:!0}};return{pieces:c,genomes:j.map(x=>{if(x.playerId===a&&x.stability<=0){console.log(`STABILITY CRITICAL for ${a}. Triggering Hard Reboot.`);const _=e.players.findIndex(B=>B.id===a),M=["H-4--2","H--2-4","H--4-2","H-2--4"],U=M[_%M.length];return c[o]={...c[o],hexId:U},{...x,stability:3,dataClusters:1,rawMatter:0,baseAttributes:{NAV:1,LOG:1,DEF:1,SCN:1},cubePool:8}}return x}),lastHarvestResults:p,phenotypeActions:E}}),drawEnvironmentalEvent:C(({context:e,event:s})=>{if(s.type==="SYNC_STATE")return{};if(e.currentEvent)return{};let a=e.eventDeck,r=e.seed||12345;if(a.length===0){const c=Z(r+e.round);a=ue([...le],c)}const o=a[0],i=a.slice(1);return{currentEvent:o||null,eventDeck:i}}),forceEnvironmentalEvent:C(({context:e,event:s})=>{if(s.type!=="FORCE_EVENT")return{};const a=le.find(r=>r.id===s.eventId)||e.eventDeck.find(r=>r.id===s.eventId);return a?{currentEvent:a,gamePhase:"environmental"}:{}}),evaluateEnvironmentalFitness:C(({context:e})=>{if(!e.currentEvent)return{};const s=e.currentEvent;console.log("--- EVALUATING EVENT:",s.name,"---");const a=s.checkType;let r=0;typeof s.threshold=="number"?r=s.threshold:s.threshold==="AVG+2"&&(r=e.genomes.reduce((f,m)=>f+Y(m,"TOTAL_SUM"),0)/e.players.length+2);const o=d=>{if(console.log("Finding targets for:",d),!d||d==="self"){const f=e.players.map(m=>m.id);return console.log("Target self -> all players:",f),f}if(d==="all")return e.players.map(f=>f.id);if(d==="priority")return[e.priorityPlayerId];if(d==="lowest_sum"){const f=[...n].sort((k,N)=>Y(k,"TOTAL_SUM")-Y(N,"TOTAL_SUM")),m=f.length>0?[f[0].playerId]:[];return console.log("Target lowest_sum ->",m),m}if(d==="highest_sum"){const f=[...n].sort((k,N)=>Y(N,"TOTAL_SUM")-Y(k,"TOTAL_SUM")),m=f.length>0?[f[0].playerId]:[];return console.log("Target highest_sum ->",m),m}if(d==="most_data"){const f=[...n].sort((m,k)=>k.dataClusters-m.dataClusters);return f.length>0?[f[0].playerId]:[]}if(d==="most_matter"){const f=[...n].sort((m,k)=>k.rawMatter-m.rawMatter);return f.length>0?[f[0].playerId]:[]}if(d==="highest_stat")return e.players.map(f=>f.id);if(d==="sum_26_plus"){const f=n.filter(m=>Y(m,"TOTAL_SUM")>=26).map(m=>m.playerId);return console.log("Target sum_26_plus ->",f),f}if(d==="stat_8_plus"){const f=n.filter(m=>Object.values(m.baseAttributes).some(k=>k>=8)).map(m=>m.playerId);return console.log("Target stat_8_plus ->",f),f}return[]},i=(d,f)=>{const m={...d},k=f.fraction?Math.floor(d.dataClusters*.5):f.amount||0;switch(f.type){case"stability":m.stability=Math.max(0,m.stability-k);break;case"data":m.dataClusters=Math.max(0,m.dataClusters-k);break;case"matter":m.rawMatter>=k?m.rawMatter-=k:f.details?.fallback==="stability"&&(m.stability=Math.max(0,m.stability-1));break;case"stat_mod_temp":const y=f.amount||0;f.attribute?m.tempAttributeModifiers[f.attribute]+=y:Object.keys(m.tempAttributeModifiers).forEach(S=>{m.tempAttributeModifiers[S]+=y});break;case"stat_mod_perm":if(f.target==="highest_stat"){const j=["NAV","LOG","DEF","SCN"].reduce((l,b)=>m.baseAttributes[b]>m.baseAttributes[l]?b:l);m.baseAttributes[j]=Math.max(1,m.baseAttributes[j]-1)}break;case"hard_reboot":{const S=e.players.findIndex(I=>I.id===d.playerId),j=["H-4--2","H--2-4","H--4-2","H-2--4"],l=j[S%j.length],b=p.findIndex(I=>I.playerId===d.playerId);b!==-1&&(p[b]={...p[b],hexId:l}),m.stability=3,m.dataClusters=1,m.rawMatter=0,m.baseAttributes={NAV:1,LOG:1,DEF:1,SCN:1},m.cubePool=8}break;case"gain_insight":m.insightTokens+=k;break}const N={...m};if(N.stability<=0){console.log(`STABILITY CRITICAL (Event) for ${d.playerId}. Triggering Hard Reboot.`);const y=e.players.findIndex(b=>b.id===d.playerId),S=["H-4--2","H--2-4","H--4-2","H-2--4"],j=S[y%S.length],l=p.findIndex(b=>b.playerId===d.playerId);l!==-1&&(p[l]={...p[l],hexId:j}),N.stability=3,N.dataClusters=1,N.rawMatter=0,N.baseAttributes={NAV:1,LOG:1,DEF:1,SCN:1},N.cubePool=8}return N},c=(d,f,m,k)=>{let N=[...d],y=[...f];if(m.type==="transfer"){const S=m.details?.from,j=m.details?.to,l=m.details?.resource,b=m.amount||1,I=S==="highest_sum"?o("highest_sum"):[k],E=j==="lowest_sum"?o("lowest_sum"):[k];if(I.length>0&&E.length>0){const x=I[0],_=E[0];N=N.map(M=>{if(M.playerId===x){if(l==="data")return{...M,dataClusters:Math.max(0,M.dataClusters-b)};if(l==="matter")return{...M,rawMatter:Math.max(0,M.rawMatter-b)}}if(M.playerId===_){if(l==="data")return{...M,dataClusters:M.dataClusters+b};if(l==="matter")return{...M,rawMatter:M.rawMatter+b}}return M}),console.log(`Transferred ${b} ${l} from ${x} to ${_}`)}}else if(m.type==="displacement"){const S=o(m.target),j=m.amount||1;y=y.map(l=>(S.includes(l.playerId)&&console.log(`Displacing ${l.playerId} by ${j} units`),l))}return{genomes:N,pieces:y}};let n=[...e.genomes],u=[...e.hexGrid],p=[...e.pieces];const g={},h=Z((e.seed||12345)+e.round+999);if(s.effects.global){if(["transfer","displacement","map_shift"].includes(s.effects.global.type)){const d=c(n,p,s.effects.global,e.priorityPlayerId);n=d.genomes,p=d.pieces}else{const d=o(s.effects.global.target);n=n.map(f=>d.includes(f.playerId)?i(f,s.effects.global):f)}if(s.effects.global.type==="map_shift"&&(console.log("MAP SHIFT EVENT:",s.effects.global.details?.action),s.effects.global.details?.action==="move_singularity_toward")){const d=o(s.effects.global.target);if(d.length>0){const f=p.find(N=>N.playerId===d[0]),m=u.find(N=>N.id===f?.hexId);u.find(N=>N.type==="Singularity")&&m&&console.log(`Moving Singularity toward ${d[0]}`)}}}return a!=="NONE"&&(n=n.map(d=>{const f=te(h,6),m=f<=2?-1:f>=5?1:0,k=Y(d,a)+m,N=k>=r;if(g[d.playerId]={roll:f,modifier:m,success:N},console.log(`Player ${d.playerId}: Roll=${f}(${m}), Fitness=${k}, Success=${N}`),N&&s.effects.onSuccess){if(["transfer","displacement"].includes(s.effects.onSuccess.type)){const y=c(n,p,s.effects.onSuccess,d.playerId);return p=y.pieces,y.genomes.find(S=>S.playerId===d.playerId)||d}else if(o(s.effects.onSuccess.target).includes(d.playerId))return console.log(`Applying SUCCESS effect to ${d.playerId}`),i(d,s.effects.onSuccess)}else if(!N&&s.effects.onFailure){if(["transfer","displacement"].includes(s.effects.onFailure.type)){const y=c(n,p,s.effects.onFailure,d.playerId);return p=y.pieces,y.genomes.find(S=>S.playerId===d.playerId)||d}else if(o(s.effects.onFailure.target).includes(d.playerId))return console.log(`Applying FAILURE effect to ${d.playerId}`),i(d,s.effects.onFailure)}return d})),{genomes:n,hexGrid:u,pieces:p,lastEventResults:g}}),resolveHustle:C(({context:e,event:s})=>{if(s.type!=="HUSTLE")return{};const{attackerId:a,defenderId:r}=s,o=e.genomes.find(p=>p.playerId===a),i=e.genomes.find(p=>p.playerId===r);if(!o||!i)return{};const c=Object.values(o.baseAttributes).reduce((p,g)=>p+g,0),n=Object.values(i.baseAttributes).reduce((p,g)=>p+g,0);return{genomes:e.genomes.map(p=>p.playerId===a&&c>n?{...p,dataClusters:p.dataClusters+1}:p.playerId===r&&n>c?{...p,dataClusters:p.dataClusters+1}:p)}}),confirmPhase:C(({context:e,event:s})=>{if(s.type!=="CONFIRM_PHASE")return{};if(console.log("Action: confirmPhase",s.playerId,"Current confirmed:",e.confirmedPlayers),e.confirmedPlayers.includes(s.playerId))return{};const a=[...e.confirmedPlayers,s.playerId];console.log("New confirmed list:",a);const r=e.genomes.find(c=>c.playerId===s.playerId),o=r&&e.gamePhase!=="setup"?Ae(r):0,i=e.genomes.map(c=>c.playerId===s.playerId?{...c,rawMatter:Math.max(0,c.rawMatter-o)}:c);return{confirmedPlayers:a,genomes:i}}),incrementRound:C(({context:e})=>({round:e.round+1,currentPlayerIndex:0,mutationResults:{},genomes:e.genomes.map(s=>({...s,tempAttributeModifiers:{...ce}})),currentEvent:null,lastEventResults:{}})),recordWinner:C(({context:e})=>({winners:e.genomes.filter(a=>ge(a)).map(a=>a.playerId)})),optimizeData:C(({context:e,event:s})=>{if(s.type!=="OPTIMIZE_DATA")return{};const{playerId:a}=s,r=e.genomes.find(o=>o.playerId===a);return!r||r.dataClusters<3?{}:{genomes:e.genomes.map(o=>o.playerId===a?{...o,dataClusters:o.dataClusters-3,cubePool:o.cubePool+1}:o)}}),pruneAttribute:C(({context:e,event:s})=>{if(s.type!=="PRUNE_ATTRIBUTE")return{};const{playerId:a,attribute:r}=s,o=e.genomes.find(i=>i.playerId===a);return!o||o.baseAttributes[r]<=1?{}:{genomes:e.genomes.map(i=>i.playerId===a?{...i,baseAttributes:{...i.baseAttributes,[r]:i.baseAttributes[r]-1},rawMatter:i.rawMatter+2}:i)}}),finalizeOptimization:C(({context:e})=>({genomes:e.genomes.map(s=>({...s,stability:3,mutationModifiers:{...ce},dataClusters:Math.min(2,s.dataClusters),rawMatter:Math.min(2,s.rawMatter)})),lastHarvestResults:[]})),resetGame:C(({context:e})=>({genomes:e.players.map(s=>({playerId:s.id,stability:3,dataClusters:0,rawMatter:0,insightTokens:0,lockedSlots:[],baseAttributes:{NAV:1,LOG:1,DEF:1,SCN:1},mutationModifiers:{...ce},tempAttributeModifiers:{...ce},cubePool:8,hasPassedSingularity:!1})),pieces:e.players.map((s,a)=>{const r=["H-4--2","H--2-4","H--4-2","H-2--4"];return{playerId:s.id,hexId:r[a%r.length]}}),eventDeck:[...le],currentEvent:null,gamePhase:"setup",round:1,winners:[],currentPlayerIndex:0,mutationResults:{},lastMutationRoll:null,lastHarvestSuccess:null,lastHarvestResults:[],phenotypeActions:{},confirmedPlayers:[]}))},guards:{allConfirmedAndWin:({context:e})=>{const s=e.confirmedPlayers.length===e.players.length,a=e.genomes.some(r=>ge(r));return console.log("Guard: allConfirmedAndWin",s&&a,"Confirmed:",s,"Winner:",a),s&&a},allPlayersConfirmed:({context:e})=>{const s=e.confirmedPlayers.length===e.players.length;return console.log("Guard: allPlayersConfirmed",s,"Confirmed:",e.confirmedPlayers.length,"Total:",e.players.length),s},allPlayersReady:({context:e})=>e.genomes.every(s=>s.cubePool===0),checkWin:({context:e})=>e.genomes.some(s=>ge(s)),isLastPhenotypeTurn:({context:e})=>e.currentPlayerIndex>=e.turnOrder.length-1,canMove:({context:e,event:s})=>{if(s.type!=="MOVE_PLAYER")return!1;const a=e.turnOrder[e.currentPlayerIndex];if(s.playerId!==a)return console.log(`Guard: canMove failed - not ${s.playerId}'s turn. Active: ${a}`),!1;const r=e.genomes.find(d=>d.playerId===s.playerId),o=e.pieces.find(d=>d.playerId===s.playerId),i=e.hexGrid.find(d=>d.id===s.hexId),c=e.hexGrid.find(d=>d.id===o?.hexId);if(!r||!o||!i||!c)return console.log(`Guard: canMove failed - missing data: genome=${!!r}, piece=${!!o}, targetHex=${!!i}, currentHex=${!!c}`),!1;const n=Ye(c.x,c.y,i.x,i.y);if(n!==1)return console.log(`Guard: canMove failed - distance ${n} is not 1. From ${c.id} to ${i.id}`),!1;if(i.type==="Singularity"&&r.dataClusters<10)return console.log(`Guard: canMove failed - Singularity requires 10 Data Clusters. Has: ${r.dataClusters}`),!1;const u=(r.baseAttributes.NAV||0)+(r.mutationModifiers.NAV||0),p=e.phenotypeActions[s.playerId]||{movesMade:0},h=i.yield.matter>0&&i.yield.data>0?2:1;return p.movesMade+h>u?(console.log(`Guard: canMove failed - not enough NAV. Moves made: ${p.movesMade}, Cost: ${h}, NAV: ${u}`),!1):!0}}}),ze=({genome:e,onDistribute:s,editable:a,setupLimit:r})=>{const o=[{type:"NAV",label:"Navigation",icon:Ne,color:"text-blue-400"},{type:"LOG",label:"Logic",icon:jt,color:"text-green-400"},{type:"DEF",label:"Defense",icon:Vt,color:"text-red-400"},{type:"SCN",label:"Sensors",icon:_t,color:"text-yellow-400"}],i=Object.values(e.baseAttributes).reduce((n,u)=>n+u,0),c=Ae(e);return t.jsxs("div",{className:"bg-slate-900/90 border-2 border-slate-800 rounded-xl p-6 shadow-2xl backdrop-blur-md w-full max-w-2xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("h3",{className:"text-xl font-black text-white tracking-widest uppercase flex items-center gap-2",children:[t.jsx(Re,{className:"w-6 h-6 text-indigo-400"}),"Genome Console"]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(Tt,{className:"w-3 h-3 text-red-500 fill-red-500/20"}),t.jsx("div",{className:"flex gap-1",children:Array.from({length:3}).map((n,u)=>t.jsx("div",{className:`w-3 h-3 rounded-sm border transition-all ${u<e.stability?"bg-red-500 border-red-400 shadow-[0_0_5px_rgba(239,68,68,0.5)]":"bg-slate-900 border-slate-800"}`},u))}),t.jsx("span",{className:"text-[10px] font-black text-red-400 uppercase tracking-tighter ml-1",children:"Stability"})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Allocated"}),t.jsx("span",{className:"text-sm font-black text-white px-2 py-0.5 bg-white/5 rounded-md ring-1 ring-white/10",children:i})]}),t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Pool"}),t.jsx("span",{className:`${e.cubePool>0?"text-indigo-400 bg-indigo-500/20":"text-slate-500 bg-slate-900"} text-sm font-black px-2 py-0.5 rounded-md ring-1 ring-indigo-500/30 transition-all`,children:e.cubePool})]})]})]}),t.jsx("div",{className:"space-y-6 mb-8",children:o.map(n=>t.jsxs("div",{className:"group",children:[t.jsxs("div",{className:"flex justify-between items-end mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(n.icon,{className:`w-4 h-4 ${n.color}`}),t.jsx("span",{className:`text-xs font-bold uppercase tracking-widest ${n.color}`,children:n.label})]}),t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"text-lg font-black text-white tabular-nums w-4 text-center",children:e.baseAttributes?.[n.type]??0})})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex gap-1.5 h-6 flex-1",children:Array.from({length:10}).map((u,p)=>t.jsx("div",{onClick:()=>{if(!a)return;const g=p+1;if(r&&g>r)return;const h=e.baseAttributes?.[n.type]??0;if(g!==h){if(!r&&g<h){g===h-1&&s?.(n.type,-1);return}s?.(n.type,g-h)}},className:`flex-1 h-full rounded-sm border transition-all duration-300 relative group/slot
                                            ${a&&(r?p<r:p>=(e.baseAttributes?.[n.type]??0)||p===(e.baseAttributes?.[n.type]??0)-1)?"cursor-pointer hover:ring-2 hover:ring-white/30 hover:scale-[1.05] hover:z-10":"cursor-not-allowed opacity-40"} 
                                            ${p<(e.baseAttributes?.[n.type]??0)?`bg-gradient-to-br ${n.color.replace("text","from").replace("-400","-500")} ${n.color.replace("text","to").replace("-400","-700")} shadow-[0_0_10px_rgba(0,0,0,0.5)] border-white/20`:r&&p>=r?"bg-slate-950/20 border-slate-900/50":"bg-slate-950/50 border-slate-800/50 shadow-inner"}
                                            `,children:r&&p===r-1&&t.jsx("div",{className:"absolute inset-y-0 -right-[4px] w-[2px] bg-indigo-500/30 z-20 pointer-events-none",title:"Setup Limit"})},p))}),t.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-[10px] font-black transition-all ${Math.abs(e.mutationModifiers?.[n.type]||0)>0?"bg-indigo-500/20 border-indigo-500/50 text-indigo-400 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"bg-slate-950 border-slate-800 text-slate-700"}`,children:e.mutationModifiers?.[n.type]?e.mutationModifiers[n.type]>0?`+${e.mutationModifiers[n.type]}`:e.mutationModifiers[n.type]:""})]})]},n.type))}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-950/50 p-4 rounded-lg border border-slate-800 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Re,{className:"w-5 h-5 text-amber-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase leading-none truncate",children:"Matter"}),t.jsx("div",{className:"text-xl font-black text-white leading-tight",children:e.rawMatter})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[t.jsx("div",{className:"flex flex-wrap-reverse gap-0.5 w-12 justify-end",children:Array.from({length:Math.min(e.rawMatter,10)}).map((n,u)=>t.jsx("div",{className:"w-2 h-2 bg-amber-600 rounded-sm shadow-sm"},u))}),t.jsxs("div",{className:`text-[8px] font-black uppercase px-2 py-0.5 rounded-full ring-1 ${e.rawMatter<c?"bg-red-500/20 text-red-500 ring-red-500/30":"bg-slate-900/50 text-slate-500 ring-white/5"}`,children:["Required: ",c]})]})]}),t.jsxs("div",{className:"bg-slate-950/50 p-4 rounded-lg border border-slate-800 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pt,{className:"w-5 h-5 text-cyan-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase leading-none",children:"Data"}),t.jsx("div",{className:"text-xl font-black text-white leading-tight",children:e.dataClusters})]})]}),t.jsx("div",{className:"flex flex-wrap-reverse gap-0.5 w-12 justify-end",children:Array.from({length:Math.min(e.dataClusters,10)}).map((n,u)=>t.jsx("div",{className:"w-2 h-2 bg-cyan-600 rounded-sm shadow-sm"},u))})]})]})]})},es=({event:e})=>{if(!e)return t.jsx("div",{className:"bg-black/20 border-2 border-dashed border-white/10 rounded-2xl p-4 text-center",children:t.jsx("span",{className:"text-slate-600 text-[10px] font-black uppercase tracking-wider",children:"No Active Event Protocol"})});const s=r=>{if(!r)return null;const o=r.target==="self"?"You":r.target==="all"?"All":r.target==="priority"?"Priority":r.target==="most_data"?"Most Data":r.target==="most_matter"?"Most Matter":r.target==="highest_stat"?"Highest Stat":r.target==="sum_26_plus"?"Sum 26+":r.target==="stat_8_plus"?"Stat 8+":"";switch(r.type){case"stability":return`${o} lose ${r.amount} Stability`;case"data":return`${o} lose ${r.details?.fraction?"half":r.amount} Data`;case"matter":return`${o} lose ${r.amount} Matter`;case"displacement":return`${o} displaced ${r.amount}`;case"movement_cost":return"Movement cost doubled";case"stat_mod_temp":return"All stats -1 next turn";case"stat_mod_perm":return"-1 Perm";case"hard_reboot":return"HARD REBOOT";case"map_shift":return`Map Shift: ${r.details?.action.replace(/_/g," ")}`;case"transfer":return`Transfer ${r.amount} ${r.details?.resource}`;case"gain_insight":return`${o} +${r.amount} Insight`;default:return""}},a={Hazard:"text-orange-400 bg-orange-500/10 border-orange-500/20",Pressure:"text-red-400 bg-red-500/10 border-red-500/20",Shift:"text-blue-400 bg-blue-500/10 border-blue-500/20","Apex Lead":"text-purple-400 bg-purple-500/10 border-purple-500/20",Bonus:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"};return t.jsxs("div",{className:`border-2 rounded-2xl p-4 bg-slate-900/50 backdrop-blur-xl transition-all ${e.type==="Hazard"?"border-orange-500/30":e.type==="Pressure"?"border-red-500/30":e.type==="Shift"?"border-blue-500/30":e.type==="Apex Lead"?"border-purple-500/30":"border-emerald-500/30"}`,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-1.5 rounded-lg border ${a[e.type]}`,children:t.jsx(Yt,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-white text-[11px] uppercase tracking-wide leading-none",children:e.name}),t.jsx("p",{className:"text-[7px] font-black uppercase tracking-widest mt-1 opacity-70",children:e.type})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"bg-black/40 rounded-lg px-2 py-1 border border-white/5 flex flex-col items-center min-w-[60px]",children:[t.jsx("span",{className:"text-[7px] font-black text-slate-500 uppercase tracking-tighter leading-none mb-0.5",children:"REQ CHECK"}),t.jsxs("span",{className:"font-black text-white text-[10px] tracking-widest leading-none",children:[e.checkType," ",t.jsx("span",{className:"text-orange-500",children:e.threshold})]})]})})]}),t.jsx("p",{className:"text-[10px] text-slate-400 mb-3 border-l-2 border-white/5 pl-2 italic leading-tight",children:e.description}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.effects.onSuccess&&t.jsxs("div",{className:"text-[9px] bg-emerald-900/10 text-emerald-400/80 rounded border border-emerald-500/10 px-2 py-1 flex items-center gap-1.5",children:[t.jsx("div",{className:"w-1 h-3 bg-emerald-500 rounded-full"}),t.jsx("span",{className:"font-black uppercase tracking-tighter text-[7px] text-emerald-500",children:"WIN:"}),t.jsx("span",{className:"truncate",children:s(e.effects.onSuccess)})]}),e.effects.onFailure&&t.jsxs("div",{className:"text-[9px] bg-red-900/10 text-red-400/80 rounded border border-red-500/10 px-2 py-1 flex items-center gap-1.5",children:[t.jsx("div",{className:"w-1 h-3 bg-red-500 rounded-full"}),t.jsx("span",{className:"font-black uppercase tracking-tighter text-[7px] text-red-500",children:"LOSS:"}),t.jsx("span",{className:"truncate",children:s(e.effects.onFailure)})]})]})]})},ts=({currentPhase:e,round:s})=>{const a=[{id:"mutation",name:"Mutation",icon:t.jsx(ke,{className:"w-4 h-4"}),desc:"Stochastic Evolution"},{id:"phenotype",name:"Phenotype",icon:t.jsx($t,{className:"w-4 h-4"}),desc:"Expression Phase"},{id:"environmental",name:"Environmental",icon:t.jsx(kt,{className:"w-4 h-4"}),desc:"Selection Pressure"},{id:"competitive",name:"Competitive",icon:t.jsx(Bt,{className:"w-4 h-4"}),desc:"Conflict Resolution"},{id:"optimization",name:"Optimization",icon:t.jsx(Dt,{className:"w-4 h-4"}),desc:"Genome Refinement"}];return t.jsxs("div",{className:"bg-white/5 p-6 rounded-[2.5rem] border border-white/5 backdrop-blur-xl shadow-inner",children:[t.jsxs("div",{className:"flex items-center gap-8 mb-6",children:[t.jsxs("div",{className:"w-32",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Generation"}),t.jsx("p",{className:"text-[8px] font-bold text-slate-600 uppercase tracking-widest mt-0.5",children:"Evolution Cycle"})]}),t.jsx("div",{className:"flex gap-3",children:[1,2,3,4,5].map(r=>t.jsx("div",{className:"relative group/round",children:t.jsxs("div",{className:`w-10 h-10 rounded-xl border-2 flex items-center justify-center transition-all duration-500
                                ${s===r?"bg-purple-500/20 border-purple-400/50 shadow-[0_0_15px_rgba(168,85,247,0.3)]":"bg-black/40 border-white/5 group-hover/round:border-white/10"}`,children:[t.jsx("span",{className:`text-[10px] font-black transition-colors ${s===r?"text-purple-400":"text-slate-600"}`,children:r}),s===r&&t.jsx("div",{className:"absolute -top-1 -right-1 animate-in zoom-in-50 duration-500",children:t.jsx("div",{className:"w-5 h-5 bg-purple-500 rounded-full flex items-center justify-center shadow-lg border border-white/20",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})})]})},r))})]}),t.jsx("div",{className:"h-px w-full bg-white/5 mb-6"}),t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsxs("div",{className:"w-32",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Phase Sequence"}),t.jsx("p",{className:"text-[8px] font-bold text-slate-600 uppercase tracking-widest mt-0.5",children:"Genetic Algorithm"})]}),t.jsx("div",{className:"flex gap-4 flex-wrap",children:a.map((r,o,i)=>t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:`flex flex-col p-3 rounded-2xl border-2 transition-all duration-500 min-w-[140px] relative
                                ${e===r.id?"bg-purple-500/10 border-purple-500/50 shadow-[0_0_15px_rgba(168,85,247,0.2)]":"bg-black/40 border-white/5 opacity-40"}
                            `,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${e===r.id?"bg-purple-500 animate-pulse":"bg-slate-600"}`}),t.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${e===r.id?"text-purple-400":"text-slate-500"}`,children:r.name})]}),t.jsx("span",{className:"text-[8px] font-bold text-slate-600 uppercase mt-1 ml-4",children:r.desc}),e===r.id&&t.jsx("div",{className:"absolute -left-2 top-1/2 -translate-y-1/2 animate-in slide-in-from-left-2 duration-500",children:t.jsx("div",{className:"w-1 h-8 bg-purple-500 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.5)]"})})]}),o<i.length-1&&t.jsx("div",{className:"w-4 h-px bg-white/10"})]},r.id))})]})]})};await F("react");function $e(e,s){if(typeof e=="function")return e(s);e!=null&&(e.current=s)}function ss(...e){return s=>{let a=!1;const r=e.map(o=>{const i=$e(o,s);return!a&&typeof i=="function"&&(a=!0),i});if(a)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():$e(e[o],null)}}}}const $=await F("react");function rs(e){const s=ns(e),a=$.forwardRef((r,o)=>{const{children:i,...c}=r,n=$.Children.toArray(i),u=n.find(is);if(u){const p=u.props.children,g=n.map(h=>h===u?$.Children.count(p)>1?$.Children.only(null):$.isValidElement(p)?p.props.children:null:h);return t.jsx(s,{...c,ref:o,children:$.isValidElement(p)?$.cloneElement(p,void 0,g):null})}return t.jsx(s,{...c,ref:o,children:i})});return a.displayName=`${e}.Slot`,a}var as=rs("Slot");function ns(e){const s=$.forwardRef((a,r)=>{const{children:o,...i}=a;if($.isValidElement(o)){const c=cs(o),n=ls(i,o.props);return o.type!==$.Fragment&&(n.ref=r?ss(r,c):c),$.cloneElement(o,n)}return $.Children.count(o)>1?$.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var os=Symbol("radix.slottable");function is(e){return $.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===os}function ls(e,s){const a={...s};for(const r in s){const o=e[r],i=s[r];/^on[A-Z]/.test(r)?o&&i?a[r]=(...n)=>{const u=i(...n);return o(...n),u}:o&&(a[r]=o):r==="style"?a[r]={...o,...i}:r==="className"&&(a[r]=[o,i].filter(Boolean).join(" "))}return{...e,...a}}function cs(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?e.ref:(s=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function Ke(e){var s,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(s=0;s<o;s++)e[s]&&(a=Ke(e[s]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Xe(){for(var e,s,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(s=Ke(e))&&(r&&(r+=" "),r+=s);return r}const Ge=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Le=Xe,ds=(e,s)=>a=>{var r;if(s?.variants==null)return Le(e,a?.class,a?.className);const{variants:o,defaultVariants:i}=s,c=Object.keys(o).map(p=>{const g=a?.[p],h=i?.[p];if(g===null)return null;const d=Ge(g)||Ge(h);return o[p][d]}),n=a&&Object.entries(a).reduce((p,g)=>{let[h,d]=g;return d===void 0||(p[h]=d),p},{}),u=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:h,className:d,...f}=g;return Object.entries(f).every(m=>{let[k,N]=m;return Array.isArray(N)?N.includes({...i,...n}[k]):{...i,...n}[k]===N})?[...p,h,d]:p},[]);return Le(e,c,u,a?.class,a?.className)},ps=(e,s)=>{const a=new Array(e.length+s.length);for(let r=0;r<e.length;r++)a[r]=e[r];for(let r=0;r<s.length;r++)a[e.length+r]=s[r];return a},us=(e,s)=>({classGroupId:e,validator:s}),Ze=(e=new Map,s=null,a)=>({nextPart:e,validators:s,classGroupId:a}),me="-",He=[],ms="arbitrary..",hs=e=>{const s=xs(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return fs(c);const n=c.split(me),u=n[0]===""&&n.length>1?1:0;return Je(n,u,s)},getConflictingClassGroupIds:(c,n)=>{if(n){const u=r[c],p=a[c];return u?p?ps(p,u):u:p||He}return a[c]||He}}},Je=(e,s,a)=>{if(e.length-s===0)return a.classGroupId;const o=e[s],i=a.nextPart.get(o);if(i){const p=Je(e,s+1,i);if(p)return p}const c=a.validators;if(c===null)return;const n=s===0?e.join(me):e.slice(s).join(me),u=c.length;for(let p=0;p<u;p++){const g=c[p];if(g.validator(n))return g.classGroupId}},fs=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=e.slice(1,-1),a=s.indexOf(":"),r=s.slice(0,a);return r?ms+r:void 0})(),xs=e=>{const{theme:s,classGroups:a}=e;return gs(a,s)},gs=(e,s)=>{const a=Ze();for(const r in e){const o=e[r];Ie(o,a,r,s)}return a},Ie=(e,s,a,r)=>{const o=e.length;for(let i=0;i<o;i++){const c=e[i];bs(c,s,a,r)}},bs=(e,s,a,r)=>{if(typeof e=="string"){ys(e,s,a);return}if(typeof e=="function"){ws(e,s,a,r);return}vs(e,s,a,r)},ys=(e,s,a)=>{const r=e===""?s:Qe(s,e);r.classGroupId=a},ws=(e,s,a,r)=>{if(ks(e)){Ie(e(r),s,a,r);return}s.validators===null&&(s.validators=[]),s.validators.push(us(a,e))},vs=(e,s,a,r)=>{const o=Object.entries(e),i=o.length;for(let c=0;c<i;c++){const[n,u]=o[c];Ie(u,Qe(s,n),a,r)}},Qe=(e,s)=>{let a=e;const r=s.split(me),o=r.length;for(let i=0;i<o;i++){const c=r[i];let n=a.nextPart.get(c);n||(n=Ze(),a.nextPart.set(c,n)),a=n}return a},ks=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Ns=e=>{if(e<1)return{get:()=>{},set:()=>{}};let s=0,a=Object.create(null),r=Object.create(null);const o=(i,c)=>{a[i]=c,s++,s>e&&(s=0,r=a,a=Object.create(null))};return{get(i){let c=a[i];if(c!==void 0)return c;if((c=r[i])!==void 0)return o(i,c),c},set(i,c){i in a?a[i]=c:o(i,c)}}},je="!",De=":",js=[],Fe=(e,s,a,r,o)=>({modifiers:e,hasImportantModifier:s,baseClassName:a,maybePostfixModifierPosition:r,isExternal:o}),As=e=>{const{prefix:s,experimentalParseClassName:a}=e;let r=o=>{const i=[];let c=0,n=0,u=0,p;const g=o.length;for(let k=0;k<g;k++){const N=o[k];if(c===0&&n===0){if(N===De){i.push(o.slice(u,k)),u=k+1;continue}if(N==="/"){p=k;continue}}N==="["?c++:N==="]"?c--:N==="("?n++:N===")"&&n--}const h=i.length===0?o:o.slice(u);let d=h,f=!1;h.endsWith(je)?(d=h.slice(0,-1),f=!0):h.startsWith(je)&&(d=h.slice(1),f=!0);const m=p&&p>u?p-u:void 0;return Fe(i,f,d,m)};if(s){const o=s+De,i=r;r=c=>c.startsWith(o)?i(c.slice(o.length)):Fe(js,!1,c,void 0,!0)}if(a){const o=r;r=i=>a({className:i,parseClassName:o})}return r},Is=e=>{const s=new Map;return e.orderSensitiveModifiers.forEach((a,r)=>{s.set(a,1e6+r)}),a=>{const r=[];let o=[];for(let i=0;i<a.length;i++){const c=a[i],n=c[0]==="[",u=s.has(c);n||u?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(c)):o.push(c)}return o.length>0&&(o.sort(),r.push(...o)),r}},Ps=e=>({cache:Ns(e.cacheSize),parseClassName:As(e),sortModifiers:Is(e),...hs(e)}),Ss=/\s+/,Cs=(e,s)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=s,c=[],n=e.trim().split(Ss);let u="";for(let p=n.length-1;p>=0;p-=1){const g=n[p],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:k}=a(g);if(h){u=g+(u.length>0?" "+u:u);continue}let N=!!k,y=r(N?m.substring(0,k):m);if(!y){if(!N){u=g+(u.length>0?" "+u:u);continue}if(y=r(m),!y){u=g+(u.length>0?" "+u:u);continue}N=!1}const S=d.length===0?"":d.length===1?d[0]:i(d).join(":"),j=f?S+je:S,l=j+y;if(c.indexOf(l)>-1)continue;c.push(l);const b=o(y,N);for(let I=0;I<b.length;++I){const E=b[I];c.push(j+E)}u=g+(u.length>0?" "+u:u)}return u},Ms=(...e)=>{let s=0,a,r,o="";for(;s<e.length;)(a=e[s++])&&(r=et(a))&&(o&&(o+=" "),o+=r);return o},et=e=>{if(typeof e=="string")return e;let s,a="";for(let r=0;r<e.length;r++)e[r]&&(s=et(e[r]))&&(a&&(a+=" "),a+=s);return a},_s=(e,...s)=>{let a,r,o,i;const c=u=>{const p=s.reduce((g,h)=>h(g),e());return a=Ps(p),r=a.cache.get,o=a.cache.set,i=n,n(u)},n=u=>{const p=r(u);if(p)return p;const g=Cs(u,a);return o(u,g),g};return i=c,(...u)=>i(Ms(...u))},Es=[],T=e=>{const s=a=>a[e]||Es;return s.isThemeGetter=!0,s},tt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,st=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ts=/^\d+\/\d+$/,Rs=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Os=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$s=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,X=e=>Ts.test(e),P=e=>!!e&&!Number.isNaN(Number(e)),V=e=>!!e&&Number.isInteger(Number(e)),ye=e=>e.endsWith("%")&&P(e.slice(0,-1)),D=e=>Rs.test(e),Ls=()=>!0,Hs=e=>Os.test(e)&&!zs.test(e),rt=()=>!1,Ds=e=>$s.test(e),Fs=e=>Gs.test(e),Vs=e=>!w(e)&&!v(e),Us=e=>J(e,ot,rt),w=e=>tt.test(e),q=e=>J(e,it,Hs),we=e=>J(e,Ks,P),Ve=e=>J(e,at,rt),Bs=e=>J(e,nt,Fs),de=e=>J(e,lt,Ds),v=e=>st.test(e),se=e=>Q(e,it),Ws=e=>Q(e,Xs),Ue=e=>Q(e,at),Ys=e=>Q(e,ot),qs=e=>Q(e,nt),pe=e=>Q(e,lt,!0),J=(e,s,a)=>{const r=tt.exec(e);return r?r[1]?s(r[1]):a(r[2]):!1},Q=(e,s,a=!1)=>{const r=st.exec(e);return r?r[1]?s(r[1]):a:!1},at=e=>e==="position"||e==="percentage",nt=e=>e==="image"||e==="url",ot=e=>e==="length"||e==="size"||e==="bg-size",it=e=>e==="length",Ks=e=>e==="number",Xs=e=>e==="family-name",lt=e=>e==="shadow",Zs=()=>{const e=T("color"),s=T("font"),a=T("text"),r=T("font-weight"),o=T("tracking"),i=T("leading"),c=T("breakpoint"),n=T("container"),u=T("spacing"),p=T("radius"),g=T("shadow"),h=T("inset-shadow"),d=T("text-shadow"),f=T("drop-shadow"),m=T("blur"),k=T("perspective"),N=T("aspect"),y=T("ease"),S=T("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],l=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...l(),v,w],I=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],x=()=>[v,w,u],_=()=>[X,"full","auto",...x()],M=()=>[V,"none","subgrid",v,w],U=()=>["auto",{span:["full",V,v,w]},V,v,w],B=()=>[V,"auto",v,w],ee=()=>["auto","min","max","fr",v,w],he=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...x()],W=()=>[X,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],A=()=>[e,v,w],Pe=()=>[...l(),Ue,Ve,{position:[v,w]}],Se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ce=()=>["auto","cover","contain",Ys,Us,{size:[v,w]}],fe=()=>[ye,se,q],z=()=>["","none","full",p,v,w],G=()=>["",P,se,q],re=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[P,ye,Ue,Ve],_e=()=>["","none",m,v,w],ae=()=>["none",P,v,w],ne=()=>["none",P,v,w],xe=()=>[P,v,w],oe=()=>[X,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[D],breakpoint:[D],color:[Ls],container:[D],"drop-shadow":[D],ease:["in","out","in-out"],font:[Vs],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[D],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[D],shadow:[D],spacing:["px",P],text:[D],"text-shadow":[D],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",X,w,v,N]}],container:["container"],columns:[{columns:[P,w,v,n]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[V,"auto",v,w]}],basis:[{basis:[X,"full","auto",n,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[P,X,"auto","initial","none",w]}],grow:[{grow:["",P,v,w]}],shrink:[{shrink:["",P,v,w]}],order:[{order:[V,"first","last","none",v,w]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...he(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...he()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":he()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[n,"screen",...W()]}],"min-w":[{"min-w":[n,"screen","none",...W()]}],"max-w":[{"max-w":[n,"screen","none","prose",{screen:[c]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",a,se,q]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,v,we]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ye,w]}],"font-family":[{font:[Ws,w,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,v,w]}],"line-clamp":[{"line-clamp":[P,"none",v,we]}],leading:[{leading:[i,...x()]}],"list-image":[{"list-image":["none",v,w]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",v,w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[P,"from-font","auto",v,q]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[P,"auto",v,w]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",v,w]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",v,w]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Pe()}],"bg-repeat":[{bg:Se()}],"bg-size":[{bg:Ce()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},V,v,w],radial:["",v,w],conic:[V,v,w]},qs,Bs]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[P,v,w]}],"outline-w":[{outline:["",P,se,q]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",g,pe,de]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",h,pe,de]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[P,q]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",d,pe,de]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[P,v,w]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[P]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[v,w]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":l()}],"mask-image-conic-pos":[{"mask-conic":[P]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Pe()}],"mask-repeat":[{mask:Se()}],"mask-size":[{mask:Ce()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",v,w]}],filter:[{filter:["","none",v,w]}],blur:[{blur:_e()}],brightness:[{brightness:[P,v,w]}],contrast:[{contrast:[P,v,w]}],"drop-shadow":[{"drop-shadow":["","none",f,pe,de]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",P,v,w]}],"hue-rotate":[{"hue-rotate":[P,v,w]}],invert:[{invert:["",P,v,w]}],saturate:[{saturate:[P,v,w]}],sepia:[{sepia:["",P,v,w]}],"backdrop-filter":[{"backdrop-filter":["","none",v,w]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[P,v,w]}],"backdrop-contrast":[{"backdrop-contrast":[P,v,w]}],"backdrop-grayscale":[{"backdrop-grayscale":["",P,v,w]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[P,v,w]}],"backdrop-invert":[{"backdrop-invert":["",P,v,w]}],"backdrop-opacity":[{"backdrop-opacity":[P,v,w]}],"backdrop-saturate":[{"backdrop-saturate":[P,v,w]}],"backdrop-sepia":[{"backdrop-sepia":["",P,v,w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",v,w]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[P,"initial",v,w]}],ease:[{ease:["linear","initial",y,v,w]}],delay:[{delay:[P,v,w]}],animate:[{animate:["none",S,v,w]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,v,w]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:ne()}],"scale-x":[{"scale-x":ne()}],"scale-y":[{"scale-y":ne()}],"scale-z":[{"scale-z":ne()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[v,w,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",v,w]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",v,w]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[P,se,q,we]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Js=_s(Zs);function Qs(...e){return Js(Xe(e))}const er=await F("react"),tr=ds("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),L=er.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...o},i)=>{const c=r?as:"button";return t.jsx(c,{className:Qs(tr({variant:s,size:a,className:e})),ref:i,...o})});L.displayName="Button";const{useEffect:ve,useMemo:sr}=await F("react"),{useMachine:rr}=await F("@xstate/react"),{createGameMessage:Be,isGameMessage:ar}=await F("@mykoboard/integration"),We=["red","green","blue","yellow"],nr={red:"#ef4444",green:"#22c55e",blue:"#3b82f6",yellow:"#facc15"},lr=({connections:e,playerInfos:s,isInitiator:a,ledger:r,onAddLedger:o,onFinishGame:i})=>{const c=sr(()=>s.map((l,b)=>({id:l.id,name:l.name,publicKey:l.publicKey,color:We[b%We.length]})),[s]),[n,u]=rr(Qt,{input:{players:c,genomes:c.map(l=>({playerId:l.id,stability:3,dataClusters:0,rawMatter:0,insightTokens:0,lockedSlots:[],baseAttributes:{NAV:1,LOG:1,DEF:1,SCN:1},mutationModifiers:{NAV:0,LOG:0,DEF:0,SCN:0},tempAttributeModifiers:{NAV:0,LOG:0,DEF:0,SCN:0},cubePool:8})),pieces:c.map((l,b)=>{const I=["H-4--2","H--2-4","H--4-2","H-2--4"];return{playerId:l.id,hexId:I[b%I.length]}}),isInitiator:a,ledger:r,readyPlayers:[]}}),p=s.find(l=>l.isLocal),h=n.context.players.find(l=>l.publicKey&&p?.publicKey&&l.publicKey===p.publicKey||l.name===p?.name)||p,d=n.context.genomes.find(l=>l.playerId===h?.id),f=n.context.turnOrder[n.context.currentPlayerIndex],m=n.context.players.find(l=>l.id===f),k=h&&f===h.id,N=n.context.players.filter(l=>l.id!==h?.id);ve(()=>{const l=b=>{try{const I=JSON.parse(b);ar(I)&&(u({type:I.type,...I.payload}),a&&I.type!=="SYNC_STATE"&&o({type:I.type,payload:I.payload}))}catch(I){console.error("Failed to parse message:",I)}};return e.forEach(b=>{b.addMessageListener(l)}),()=>{e.forEach(b=>{b.removeMessageListener(l)})}},[e,u]),ve(()=>{a&&n.matches("waitingForPlayers")&&c.length>0&&u({type:"START_GAME",seed:n.context.seed||Date.now()})},[a,c,u,n.value,n.context.seed]),ve(()=>{if(a&&n.context.players.length>0){const l=Be("SYNC_STATE",{context:n.context});e.forEach(b=>{b.send(JSON.stringify(l))})}},[n.context,a,e]);const y=(l,b)=>{if(a){if(u({type:l,...b}),n.matches("setupPhase")&&l==="DISTRIBUTE_CUBES"){const{playerId:I,amount:E}=b;o({type:l,payload:{playerId:I,amount:E}});return}o({type:l,payload:b})}else{const I=Be(l,b);e.forEach(E=>E.send(JSON.stringify(I))),u({type:l,...b})}},S=()=>{h&&y("FINISH_TURN",{playerId:h.id})},j=()=>{y("RESET",{})};if(n.matches("won")){const l=n.context.winners.map(b=>n.context.players.find(I=>I.id===b)?.name).filter(Boolean);return t.jsxs("div",{className:"min-h-screen p-8 flex flex-col space-y-12 bg-[#020617] text-slate-100 border-0 rounded-none overflow-x-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(168,85,247,0.1),transparent)] pointer-events-none"}),t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-[#020617]/90 backdrop-blur-3xl p-4 animate-in fade-in duration-500",children:t.jsxs("div",{className:"bg-slate-900 border-purple-500/50 p-12 rounded-[3rem] max-w-2xl w-full shadow-[0_0_100px_rgba(168,85,247,0.1)] ring-1 ring-purple-500/20 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent"}),t.jsx("div",{className:"mx-auto w-24 h-24 bg-purple-500/10 rounded-full flex items-center justify-center mb-8 border border-purple-500/20 shadow-inner",children:t.jsx(Kt,{className:"w-12 h-12 text-purple-500 animate-pulse"})}),t.jsx("h2",{className:"text-5xl font-black text-white mb-4 tracking-tighter",children:"SINGULARITY ACHIEVED"}),t.jsxs("p",{className:"text-slate-400 text-lg mb-10 font-bold leading-relaxed max-w-md mx-auto",children:[l.join(", ")," reached technological singularity through optimal evolution!"]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(L,{onClick:j,className:"flex-1 h-16 rounded-2xl bg-purple-600 hover:bg-purple-500 text-white font-black text-sm uppercase tracking-[0.2em] shadow-lg transition-all",children:"New Evolution Cycle"}),t.jsx(L,{onClick:i,className:"flex-1 h-16 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-black text-sm uppercase tracking-[0.2em] border border-white/5 transition-all",children:"Exit to Lobby"})]})]})})]})}return t.jsxs("div",{className:"min-h-screen p-8 flex flex-col space-y-12 bg-[#020617] text-slate-100 border-0 rounded-none overflow-x-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(168,85,247,0.1),transparent)] pointer-events-none"}),t.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[t.jsx("div",{className:"flex flex-col",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-purple-500/10 rounded-2xl border border-purple-500/20 shadow-[0_0_20px_rgba(168,85,247,0.1)]",children:t.jsx(ke,{className:"w-8 h-8 text-purple-400 animate-pulse"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-5xl font-black tracking-tighter bg-gradient-to-br from-white to-slate-500 bg-clip-text text-transparent",children:"APEX NEBULA"}),t.jsx("p",{className:"text-[10px] font-black text-purple-400/60 uppercase tracking-[0.4em] mt-1 ml-1",children:"Evolutionary Strategy Protocol"})]})]})}),t.jsx("div",{className:"flex items-center gap-4",children:N.map(l=>t.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-white/5 border border-white/5 rounded-full",title:l.name,children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),t.jsx("span",{className:"text-[8px] font-black text-slate-400 uppercase",children:l.name})]},l.id))})]}),t.jsx("div",{className:"relative z-10",children:t.jsx(ts,{currentPhase:n.context.gamePhase,round:n.context.round})}),t.jsxs("div",{className:"relative z-10 space-y-6",children:[t.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500 flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-orange-500 rounded-full"}),"Event Deck & Protocol"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-start",children:[t.jsx("div",{className:"md:col-span-3",children:t.jsx(es,{event:n.context.currentEvent})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(Zt,{deck:n.context.eventDeck,discard:[]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 relative z-10",children:[t.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500 flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-purple-500 rounded-full"}),"Nebula Sector (Navigation Grid)"]})}),t.jsx(pt,{hexGrid:n.context.hexGrid,pieces:n.context.pieces,playerColors:Object.fromEntries(n.context.players.map(l=>[l.id,nr[l.color]])),onHexClick:l=>k&&y("MOVE_PLAYER",{playerId:h?.id,hexId:l}),currentHexId:n.context.pieces.find(l=>l.playerId===h?.id)?.hexId,maxDistance:k&&(d?.baseAttributes.NAV||0)+(d?.mutationModifiers.NAV||0)+(d?.tempAttributeModifiers.NAV||0)>(n.context.phenotypeActions[h?.id]?.movesMade||0)?1:0})]}),t.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500 flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-white/20 rounded-full"}),"Command Protocol"]}),t.jsxs("div",{className:"bg-white/5 rounded-[2rem] p-6 border border-white/5 backdrop-blur-xl shadow-inner group transition-all hover:bg-white/[0.07]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.1em] text-white",children:k?"Awaiting Input":`${m?.name}'s Cycle`}),t.jsx("div",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest px-3 py-1 bg-purple-500/10 rounded-full ring-1 ring-purple-500/30",children:n.context.gamePhase})]}),t.jsxs("div",{className:"space-y-4",children:[n.matches("setupPhase")&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed italic",children:"Distribute 12 cubes to initialize your configuration."}),t.jsx(L,{onClick:()=>y("CONFIRM_PHASE",{playerId:h?.id}),disabled:!d||d.cubePool>0||n.context.confirmedPlayers.includes(h?.id||""),className:`w-full uppercase font-black tracking-widest text-[10px] h-10 rounded-xl transition-all ${n.context.confirmedPlayers.includes(h?.id||"")?"bg-slate-800 text-slate-500":d?.cubePool===0?"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg":"bg-indigo-900/40 text-indigo-400/50 cursor-not-allowed border border-indigo-500/20"}`,children:n.context.confirmedPlayers.includes(h?.id||"")?"Confirmed":d?.cubePool===0?"Confirm Setup":`${d?.cubePool} Cubes Remaining`})]}),n.matches("mutationPhase")&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx(Ne,{className:"w-3 h-3"}),"Mutation Sync"]}),Object.keys(n.context.mutationResults).length<n.context.players.length?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Systems entering radiation zone. ",n.context.turnOrder[n.context.currentPlayerIndex]===h?.id?"Initiate sequence.":"Awaiting turn..."]}),t.jsxs(L,{onClick:()=>y("INITIATE_MUTATION",{}),disabled:n.context.turnOrder[n.context.currentPlayerIndex]!==h?.id,className:`w-full h-10 uppercase font-black tracking-widest text-[10px] rounded-xl transition-all flex items-center justify-center gap-2 ${n.context.turnOrder[n.context.currentPlayerIndex]===h?.id?"bg-indigo-600 hover:bg-indigo-500 text-white shadow-indigo-500/20":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:[t.jsx(be,{className:"w-4 h-4"}),n.context.turnOrder[n.context.currentPlayerIndex]===h?.id?"Initiate":"Awaiting..."]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:n.context.players.map(l=>{const b=n.context.mutationResults[l.id];return b?t.jsxs("div",{className:"bg-slate-900/50 p-2 rounded-lg border border-white/5 space-y-1",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:l.name}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"px-1 bg-indigo-500/20 rounded text-[8px] font-black text-indigo-400",children:b.attrRoll}),t.jsxs("div",{className:"px-1 bg-purple-500/20 rounded text-[8px] font-black text-purple-400",children:[b.magnitude>0?"+":"",b.magnitude]})]})]}),t.jsxs("div",{className:"text-[9px] font-black uppercase tracking-tight text-white/70",children:[b.attr,": ",b.magnitude>0?"+":"",b.magnitude]})]},l.id):null})}),t.jsx(L,{onClick:()=>y("CONFIRM_PHASE",{playerId:h?.id}),disabled:n.context.confirmedPlayers.includes(h?.id||""),className:`w-full uppercase font-black tracking-widest text-[10px] h-10 rounded-xl transition-all ${n.context.confirmedPlayers.includes(h?.id||"")?"bg-slate-800 text-slate-500":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg"}`,children:n.context.confirmedPlayers.includes(h?.id||"")?"Confirmed":"Confirm Phase"})]})]}),n.matches("phenotypePhase")&&t.jsx("div",{className:"space-y-4",children:k?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/20 text-center",children:[t.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase",children:"Movement Active"}),t.jsxs("p",{className:"text-xs font-black text-white",children:[Math.max(0,(d?.baseAttributes.NAV||0)+(d?.mutationModifiers.NAV||0)+(d?.tempAttributeModifiers.NAV||0)-(n.context.phenotypeActions[h?.id]?.movesMade||0))," Units"]})]}),t.jsx(L,{onClick:S,className:"w-full h-10 rounded-xl bg-slate-800 hover:bg-slate-700 text-white font-black text-[10px] uppercase tracking-widest border border-white/10",children:"Finalize Turn"})]}):t.jsx("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-white/5 text-center italic text-slate-500 text-[10px] uppercase",children:"Awaiting Turn..."})}),n.matches("phenotypePhase")&&n.context.lastHarvestResults.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-cyan-500 rounded-full"}),"Latest Extractions"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:n.context.lastHarvestResults.map((l,b)=>{const I=n.context.players.find(E=>E.id===l.playerId);return t.jsxs("div",{className:`p-2 rounded-lg border flex items-center justify-between font-black text-[9px] uppercase tracking-tight ${l.success?"bg-cyan-500/10 border-cyan-500/20 text-cyan-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:[t.jsx("span",{className:"truncate max-w-[70px]",children:I?.name||"Unknown"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"opacity-70",children:l.attribute}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(be,{className:"w-3 h-3 opacity-50"}),t.jsx("span",{children:l.roll}),t.jsx("span",{className:`text-[7px] px-1 rounded ${l.success?"bg-cyan-500/20":"bg-red-500/20"}`,children:l.success?"SUCCESS":"FAILURE"})]})]})]},b)})})]}),n.matches("environmentalPhase")&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:Object.entries(n.context.lastEventResults||{}).map(([l,b])=>{const I=n.context.players.find(E=>E.id===l);return I?t.jsxs("div",{className:`p-2 rounded-lg border flex items-center justify-between font-black text-[9px] uppercase tracking-tight ${b.success?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:[t.jsx("span",{className:"truncate max-w-[80px]",children:I.name}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(be,{className:"w-3 h-3 opacity-50"}),t.jsx("span",{children:b.roll}),t.jsxs("span",{className:"opacity-50 text-[7px]",children:["(",b.modifier>=0?"+":"",b.modifier,")"]})]})]},l):null})}),a&&t.jsx(L,{onClick:()=>y("NEXT_PHASE",{}),className:"w-full h-10 rounded-xl bg-orange-600 hover:bg-orange-500 text-white font-black text-[10px] uppercase tracking-widest shadow-lg shadow-orange-500/10",children:"Resolve Event Protocol"})]}),n.matches("competitivePhase")&&a&&t.jsx(L,{onClick:()=>y("NEXT_PHASE",{}),className:"w-full h-12 rounded-xl bg-purple-600 hover:bg-purple-500 text-white font-black text-[10px] uppercase tracking-[0.2em]",children:"Resolve Competitive"}),n.matches("optimizationPhase")&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-[10px] font-black text-indigo-400 uppercase",children:"Data Optimization"}),t.jsxs("span",{className:"text-[10px] font-black text-white",children:[d?.dataClusters||0,"/3"]})]}),t.jsxs(L,{onClick:()=>y("OPTIMIZE_DATA",{playerId:h?.id}),disabled:!d||d.dataClusters<3||n.context.confirmedPlayers.includes(h?.id||""),className:"w-full h-8 bg-indigo-600 hover:bg-indigo-500 text-[9px] uppercase font-black tracking-widest rounded-lg",children:[t.jsx(Ne,{className:"w-3 h-3 mr-2"}),"Gain Attribute Cube"]})]}),t.jsxs("div",{className:"p-3 bg-slate-900/50 border border-white/5 rounded-xl space-y-3",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Attribute Pruning"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["NAV","LOG","DEF","SCN"].map(l=>t.jsxs(L,{onClick:()=>y("PRUNE_ATTRIBUTE",{playerId:h?.id,attribute:l}),disabled:!d||d.baseAttributes[l]<=1||n.context.confirmedPlayers.includes(h?.id||""),variant:"outline",className:"h-8 text-[8px] font-black uppercase border-white/5 bg-black/20 hover:bg-red-500/10 hover:text-red-400 hover:border-red-500/20 transition-all",children:["Prune ",l]},l))}),t.jsx("p",{className:"text-[7px] text-slate-500 italic text-center uppercase tracking-tight",children:"+2 Matter per pruned level"})]}),t.jsxs("div",{className:"pt-2",children:[(()=>{const l=d?Ae(d):1;return t.jsx(L,{onClick:()=>y("CONFIRM_PHASE",{playerId:h?.id}),disabled:n.context.confirmedPlayers.includes(h?.id||""),className:`w-full h-12 rounded-xl transition-all font-black text-[10px] uppercase tracking-widest ${n.context.confirmedPlayers.includes(h?.id||"")?"bg-slate-800 text-slate-500 cursor-not-allowed":(d?.rawMatter||0)>=l?"bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-red-900/40 text-red-400 border border-red-500/20"}`,children:n.context.confirmedPlayers.includes(h?.id||"")?"Maint Sequence Active":(d?.rawMatter||0)>=l?`Finalize (Pay ${l} Matter)`:"Insufficient Matter"})})(),t.jsx("p",{className:"text-[7px] text-slate-500 text-center mt-2 uppercase opacity-50",children:"Resets Stability to 3 | Caps Data/Matter at 2"})]})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-indigo-500 rounded-full"}),"Local System",n.context.priorityPlayerId===h?.id&&t.jsx(Oe,{className:"w-3 h-3 text-yellow-500"})]}),d&&t.jsx(ze,{genome:d,editable:n.matches("setupPhase")||d.cubePool>0||n.matches("optimizationPhase"),setupLimit:n.matches("setupPhase")?6:void 0,onDistribute:(l,b)=>{b<0&&n.matches("optimizationPhase")?y("PRUNE_ATTRIBUTE",{playerId:h?.id,attribute:l}):y("DISTRIBUTE_CUBES",{playerId:h?.id,attribute:l,amount:b})}})]})]})]}),t.jsxs("div",{className:"space-y-8 relative z-10 pt-12 border-t border-white/5",children:[t.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-500 flex items-center gap-2",children:[t.jsx("div",{className:"w-1 h-3 bg-slate-700 rounded-full"}),"External Sectors"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.context.genomes.filter(l=>l.playerId!==h?.id).map(l=>{const b=n.context.players.find(x=>x.id===l.playerId);if(!b)return null;const I=n.context.turnOrder.indexOf(l.playerId),E=n.matches("phenotypePhase")?I<n.context.currentPlayerIndex:l.cubePool===0;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:b.name}),n.context.priorityPlayerId===b.id&&t.jsx(Oe,{className:"w-3 h-3 text-yellow-500"})]}),n.matches("setupPhase")?t.jsx("div",{className:`px-2 py-0.5 border rounded text-[8px] font-black uppercase ${n.context.confirmedPlayers.includes(b.id)?"bg-indigo-500/10 border-indigo-500/30 text-indigo-400":"bg-slate-800 border-white/5 text-slate-500"}`,children:n.context.confirmedPlayers.includes(b.id)?"Ready":"Configuring"}):E&&t.jsx("div",{className:"px-2 py-0.5 bg-green-500/10 border border-green-500/30 rounded text-[8px] font-black text-green-400 uppercase",children:"Ready"})]}),n.matches("setupPhase")?t.jsxs("div",{className:"bg-slate-900/50 rounded-2xl border border-white/5 p-6 flex flex-col items-center justify-center opacity-60 min-h-[220px]",children:[t.jsx(ke,{className:"w-8 h-8 text-slate-600 mb-2"}),t.jsx("span",{className:"text-[10px] font-black tracking-widest text-slate-500 uppercase",children:"Classified"})]}):t.jsx(ze,{genome:l})]},l.playerId)})})]}),t.jsxs("div",{className:"mt-auto w-full flex justify-between items-center pt-8 border-t border-white/5 relative z-10 opacity-50",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse"}),t.jsx("p",{className:"text-[8px] font-bold text-slate-700 uppercase tracking-[0.4em]",children:"APEX-OS // NODE_CONNECTED"})]}),t.jsx("p",{className:"text-[8px] font-bold text-slate-700 uppercase tracking-[0.4em]",children:"Build 2026.02.18"})]})]})};export{le as I,O as c,lr as default};
