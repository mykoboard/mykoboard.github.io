import{c as X,d as y,r as he,a as i,i as u,f as n,b as e,e as l,j as p,F as _,t as h,l as b,o as s,_ as w,h as f,q as m,n as Z,k as ee,p as fe,x as be,y as ve,z as ye,A as we,B as te,C as ke,D as Ce,E as _e,v as Ie,g as $e}from"./index-BKBOO3Kl.js";import{a as Ae}from"./GameRegistry-DkpiLfwP.js";import{C as A,L as Se,U as R,G as Pe,u as Ge,a as Le}from"./useGameSession-BAdcjAub.js";import{R as V,A as N,k as U,O as D,V as M,F as E,M as H,N as W,T as q}from"./index-CLQd1MiW.js";import{_ as J}from"./Input.vue_vue_type_script_setup_true_lang-c2DLYD8t.js";import{C as S,T as Y}from"./triangle-alert-CmbJxD8b.js";const K=X("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);const Re=X("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Fe={class:"space-y-4 animate-fade-in-up"},Be={key:0,class:"glass-dark p-6 rounded-2xl border border-white/5 shadow-glass-dark flex items-center justify-center space-x-4"},Te={key:1,class:"glass-dark p-6 rounded-2xl border border-white/5 shadow-glass-dark"},je={class:"text-sm font-black text-white uppercase tracking-[0.2em] mb-4 flex items-center gap-3"},Oe={key:2,class:"glass-dark p-6 rounded-2xl border border-white/5 shadow-glass-dark group hover:border-primary/20 transition-all duration-500"},ze={class:"text-[10px] font-black uppercase tracking-[0.2em] mb-4 flex items-center gap-2 text-primary"},Ve={class:"space-y-4"},Ne={class:"p-4 bg-white/5 rounded-xl border border-white/10 relative group min-h-[64px] flex items-center group-hover:neon-border transition-all duration-500"},Ue={class:"text-[10px] font-mono break-all line-clamp-2 text-white/40 pr-8"},De={key:1,class:"text-[10px] text-white/20 italic tracking-wider"},Me={key:3,class:"glass-dark p-6 rounded-2xl border border-white/5 shadow-glass-dark group hover:border-primary/20 transition-all duration-500"},Ee={class:"text-[10px] font-black uppercase tracking-[0.2em] mb-4 flex items-center gap-2 text-primary"},He={class:"space-y-3"},We={class:"p-4 bg-white/5 rounded-xl border border-white/10 relative group min-h-[64px] flex items-center group-hover:neon-border transition-all duration-500"},qe={class:"text-[10px] font-mono break-all line-clamp-2 text-white/40 pr-8"},Je={key:1,class:"text-[10px] text-white/20 italic tracking-wider"},Ye={key:4,class:"flex justify-end"},Ke=y({__name:"SignalingStep",props:{connection:{},onOfferChange:{type:Function},onAnswerChange:{type:Function},onCancel:{type:Function}},setup(t){const d=he(!1),c=r=>{r&&(navigator.clipboard.writeText(r),d.value=!0,setTimeout(()=>d.value=!1,2e3))};return(r,o)=>(s(),i("div",Fe,[t.connection.status===n(A).new?(s(),i("div",Be,[...o[5]||(o[5]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"},null,-1),e("p",{class:"text-sm text-white/50 font-bold uppercase tracking-widest"},"Generating invite signal...",-1)])])):u("",!0),t.connection.status===n(A).readyToAccept?(s(),i("div",Te,[e("h3",je,[l(n(Se),{class:"w-5 h-5 text-primary"}),o[6]||(o[6]=p(" Paste Join Offer ",-1))]),o[7]||(o[7]=e("p",{class:"text-[10px] text-white/30 uppercase tracking-widest mb-4"},"External node signal required for connection.",-1)),l(J,{placeholder:"Paste offer string here...",className:"h-12 bg-white/5 border-white/10 rounded-xl focus:ring-primary text-white font-mono text-xs placeholder:text-white/20","onUpdate:modelValue":o[0]||(o[0]=g=>t.onOfferChange(t.connection,g))})])):u("",!0),t.connection.status===n(A).started?(s(),i("div",Oe,[e("h3",ze,[l(n(R),{class:"w-4 h-4"}),o[8]||(o[8]=p(" Active Invite Vector ",-1))]),e("div",Ve,[e("div",Ne,[t.connection.signal?(s(),i(_,{key:0},[e("div",Ue,h(t.connection.signal.toString()),1),e("button",{class:"absolute top-2 right-2 h-8 w-8 flex items-center justify-center text-primary hover:bg-primary/10 transition-colors rounded-lg",onClick:o[1]||(o[1]=g=>c(t.connection.signal.toString()))},[d.value?(s(),b(n(S),{key:0,class:"w-4 h-4"})):(s(),b(n(K),{key:1,class:"w-4 h-4"}))])],64)):(s(),i("div",De,"Gathering node connection details..."))]),o[9]||(o[9]=e("p",{class:"text-[10px] text-white/30 uppercase font-medium leading-relaxed tracking-wider"}," Transmit this vector to a peer node. Their response will be synthesized automatically. ",-1)),l(J,{placeholder:"Awaiting peer response vector...",className:"h-10 bg-white/5 border-white/10 rounded-xl focus:ring-primary text-white font-mono text-[10px] placeholder:text-white/20","onUpdate:modelValue":o[2]||(o[2]=g=>t.onAnswerChange(t.connection,g))})])])):u("",!0),t.connection.status===n(A).answered?(s(),i("div",Me,[e("h3",Ee,[l(n(S),{class:"w-4 h-4"}),o[10]||(o[10]=p(" Signal Response Synthesized ",-1))]),e("div",He,[e("div",We,[t.connection.signal?(s(),i(_,{key:0},[e("div",qe,h(t.connection.signal.toString()),1),e("button",{class:"absolute top-2 right-2 h-8 w-8 flex items-center justify-center text-primary hover:bg-primary/10 transition-colors rounded-lg",onClick:o[3]||(o[3]=g=>c(t.connection.signal.toString()))},[d.value?(s(),b(n(S),{key:0,class:"w-4 h-4"})):(s(),b(n(K),{key:1,class:"w-4 h-4"}))])],64)):(s(),i("div",Je,"Finalizing response..."))]),o[11]||(o[11]=e("p",{class:"text-[10px] text-primary font-black uppercase tracking-widest"},"Transmit this payload back to peer to complete handshake.",-1))])])):u("",!0),t.onCancel?(s(),i("div",Ye,[e("button",{onClick:o[4]||(o[4]=g=>t.onCancel(t.connection)),class:"text-[10px] font-black uppercase tracking-widest text-white/20 hover:text-rose-500 transition-colors p-2"}," De-initialize Link ")])):u("",!0)]))}}),Q=w(Ke,[["__scopeId","data-v-77356793"]]),Qe={class:"space-y-8"},Xe={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-[#0A0A0A]/80 backdrop-blur-xl animate-fade-in p-6"},Ze={class:"glass-dark p-10 w-full max-w-md shadow-2xl border border-white/10 rounded-[2.5rem] space-y-8 animate-zoom-in"},et={class:"flex flex-col items-center text-center space-y-6"},tt={class:"h-20 w-20 bg-primary/10 rounded-[1.5rem] flex items-center justify-center border border-primary/20 shadow-neon"},nt={class:"space-y-2"},st={class:"text-white/40 uppercase tracking-widest text-[10px] font-medium leading-relaxed"},ot={class:"font-black text-primary px-1"},at={class:"grid grid-cols-2 gap-4"},it={key:1,class:"glass-dark p-10 text-center space-y-8 border border-white/5 shadow-glass-dark rounded-[3rem] animate-zoom-in"},rt={class:"space-y-4"},lt={class:"inline-flex items-center gap-2 px-4 py-1.5 bg-primary/10 text-primary border border-primary/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] shadow-neon transform -translate-y-2"},dt={class:"text-4xl font-black text-white uppercase tracking-tighter"},ct={class:"text-xs text-white/30 uppercase font-black tracking-widest leading-relaxed max-w-lg mx-auto"},ut={key:0,class:"flex flex-col items-center gap-6"},pt={class:"space-y-4"},mt={class:"mx-auto h-16 w-16 bg-rose-500/10 rounded-2xl flex items-center justify-center border border-rose-500/20"},gt={class:"grid grid-cols-2 gap-4 pt-6"},xt={key:1,class:"flex flex-col items-center gap-8 py-6"},ht={key:0,class:"relative"},ft={class:"space-y-3"},bt={class:"text-xl font-black text-white uppercase tracking-tight"},vt={class:"text-[10px] text-white/30 uppercase tracking-[0.2em] max-w-xs mx-auto font-medium leading-relaxed"},yt={class:"space-y-4"},wt={class:"mx-auto h-16 w-16 bg-rose-500/10 rounded-2xl flex items-center justify-center border border-rose-500/20"},kt={class:"grid grid-cols-2 gap-4 pt-6"},Ct={key:2,class:"pt-8 border-t border-white/5 space-y-6"},_t={key:0,class:"p-8 text-center space-y-4 bg-primary/5 border border-primary/20 rounded-3xl shadow-neon-sm animate-pulse"},It={class:"h-12 w-12 bg-primary/10 rounded-2xl flex items-center justify-center mx-auto border border-primary/20"},$t={class:"space-y-1"},At={key:0,class:"text-[10px] text-rose-500 mt-2 font-black uppercase tracking-widest"},St={key:1,class:"space-y-4 text-left"},Pt={class:"grid grid-cols-1 gap-6"},Gt={key:3,class:"pt-8 border-t border-white/5 text-left"},Lt={key:2,class:"py-24 flex flex-col items-center justify-center space-y-6 border border-white/5 bg-white/5 rounded-[3rem] backdrop-blur-sm animate-fade-in"},Rt=y({__name:"PreparationPhase",props:{state:{},isInitiator:{type:Boolean},signalingMode:{},isServerConnecting:{type:Boolean},signalingClient:{},pendingSignaling:{},onStartGame:{type:Function},onHostAGame:{type:Function},onUpdateOffer:{type:Function},onUpdateAnswer:{type:Function},onCloseSession:{type:Function},onBackToLobby:{type:Function},onAcceptGuest:{type:Function},onRejectGuest:{type:Function},onCancelSignaling:{type:Function},onRemovePlayer:{type:Function},playerCount:{},maxPlayers:{},boardId:{}},setup(t){const d=t,c=f(()=>d.state.matches("preparation")),r=f(()=>d.state.matches("hosting")),o=f(()=>d.state.matches("joining")),g=f(()=>d.state.matches("approving"));return(F,a)=>(s(),i("div",Qe,[g.value&&t.state.context.pendingGuest?(s(),i("div",Xe,[e("div",Ze,[e("div",et,[e("div",tt,[l(n(R),{class:"w-10 h-10 text-primary animate-pulse"})]),e("div",nt,[a[6]||(a[6]=e("h2",{class:"text-2xl font-black text-white uppercase tracking-tight"},"Handshake Request",-1)),e("p",st,[a[4]||(a[4]=p(" Entity ",-1)),e("span",ot,h(t.state.context.pendingGuest.name),1),a[5]||(a[5]=p(" attempts to bridge into session. ",-1))])])]),e("div",at,[e("button",{onClick:a[0]||(a[0]=(...x)=>t.onRejectGuest&&t.onRejectGuest(...x)),class:"h-14 rounded-2xl border border-white/10 text-white/60 hover:text-rose-500 hover:bg-rose-500/10 hover:border-rose-500/30 font-black uppercase tracking-widest text-xs transition-all"}," De-authorize "),e("button",{onClick:a[1]||(a[1]=(...x)=>t.onAcceptGuest&&t.onAcceptGuest(...x)),class:"h-14 rounded-2xl bg-primary text-primary-foreground shadow-neon hover:shadow-[0_0_30px_rgba(16,185,129,0.4)] font-black uppercase tracking-widest text-xs transition-all"}," Grant Access ")])])])):u("",!0),r.value||o.value||c.value||g.value?(s(),i("div",it,[e("div",rt,[e("div",lt,h(r.value||g.value?"Broadcasting Session":o.value?"Initializing Node":"Command Lobby Active"),1),e("h2",dt,h(c.value?"Game Room":r.value?"Link Establishment":"Connecting..."),1),e("p",ct,[c.value?(s(),i(_,{key:0},[p(h(t.isInitiator?`Authorize peer nodes or launch protocol when ready (${t.playerCount}/${t.maxPlayers}).`:"Waiting for initiator to launch protocol."),1)],64)):(s(),i(_,{key:1},[p("Synthesizing direct P2P mesh link to session nodes.")],64))])]),t.isInitiator?(s(),i("div",ut,[c.value?(s(),i("button",{key:0,onClick:a[2]||(a[2]=(...x)=>t.onStartGame&&t.onStartGame(...x)),class:"w-full max-w-sm h-16 text-sm font-black uppercase tracking-[0.5em] rounded-2xl bg-primary text-primary-foreground shadow-[0_0_30px_rgba(16,185,129,0.3)] hover:shadow-[0_0_50px_rgba(16,185,129,0.5)] transition-all active:scale-[0.98]"}," Launch Protocol ")):u("",!0),l(n(q),null,{default:m(()=>[l(n(V),{asChild:""},{default:m(()=>[...a[7]||(a[7]=[e("button",{class:"px-4 h-12 rounded-xl text-white/20 hover:text-rose-500 font-black uppercase tracking-widest text-[10px] transition-colors"}," Terminate Session ",-1)])]),_:1}),l(n(N),null,{default:m(()=>[l(n(U),{class:"bg-black/80 fixed inset-0 z-[100] backdrop-blur-sm"}),l(n(D),{class:"glass-dark border border-white/10 rounded-[2rem] p-8 max-w-sm fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101]"},{default:m(()=>[e("div",pt,[e("div",mt,[l(n(Y),{class:"w-8 h-8 text-rose-500"})]),l(n(M),{class:"text-xl font-black text-center text-white uppercase tracking-tight"},{default:m(()=>[...a[8]||(a[8]=[p(" Terminate Session? ",-1)])]),_:1}),l(n(E),{class:"text-center text-white/40 text-xs font-medium uppercase tracking-widest leading-relaxed"},{default:m(()=>[...a[9]||(a[9]=[p(" Reloading or leaving will cause the game session to be lost. Peers will be disconnected and discovery mesh link terminated. ",-1)])]),_:1})]),e("div",gt,[l(n(H),{class:"h-12 rounded-xl bg-white/5 border border-white/5 text-white/60 hover:bg-white/10 font-bold uppercase tracking-widest text-[10px]"},{default:m(()=>[...a[10]||(a[10]=[p(" Abort ",-1)])]),_:1}),l(n(W),{onClick:t.onCloseSession,class:"h-12 rounded-xl bg-rose-500 text-white font-black uppercase tracking-widest text-[10px] hover:bg-rose-600 shadow-neon-sm"},{default:m(()=>[...a[11]||(a[11]=[p(" Confirm ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})])):(s(),i("div",xt,[c.value?u("",!0):(s(),i("div",ht,[...a[12]||(a[12]=[e("div",{class:"animate-spin rounded-full h-20 w-20 border-4 border-primary/5 border-t-primary shadow-neon"},null,-1),e("div",{class:"absolute inset-0 flex items-center justify-center"},[e("div",{class:"h-3 w-3 bg-primary rounded-full animate-pulse shadow-neon"})],-1)])])),e("div",ft,[e("h3",bt,h(c.value?"Node Synced":"Bridging Connections"),1),e("p",vt,h(c.value?"Identity verified. Awaiting initiator's launch command.":"Establishing secure encrypted tunnel to host node."),1)]),l(n(q),null,{default:m(()=>[l(n(V),{asChild:""},{default:m(()=>[...a[13]||(a[13]=[e("button",{class:"h-10 text-white/20 hover:text-rose-500 font-black uppercase tracking-widest text-[10px] transition-colors"}," Sever Connection ",-1)])]),_:1}),l(n(N),null,{default:m(()=>[l(n(U),{class:"bg-black/80 fixed inset-0 z-[100] backdrop-blur-sm"}),l(n(D),{class:"glass-dark border border-white/10 rounded-[2rem] p-8 max-w-sm fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101]"},{default:m(()=>[e("div",yt,[e("div",wt,[l(n(Y),{class:"w-8 h-8 text-rose-500"})]),l(n(M),{class:"text-xl font-black text-center text-white uppercase tracking-tight"},{default:m(()=>[...a[14]||(a[14]=[p(" Sever Connection? ",-1)])]),_:1}),l(n(E),{class:"text-center text-white/40 text-xs font-medium uppercase tracking-widest leading-relaxed"},{default:m(()=>[...a[15]||(a[15]=[p(" Leaving or reloading will sever your node link. The game session progress will be lost. ",-1)])]),_:1})]),e("div",kt,[l(n(H),{class:"h-12 rounded-xl bg-white/5 border border-white/5 text-white/60 hover:bg-white/10 font-bold uppercase tracking-widest text-[10px]"},{default:m(()=>[...a[16]||(a[16]=[p(" Abort ",-1)])]),_:1}),l(n(W),{onClick:t.onBackToLobby,class:"h-12 rounded-xl bg-rose-500 text-white font-black uppercase tracking-widest text-[10px] hover:bg-rose-600 shadow-neon-sm"},{default:m(()=>[...a[17]||(a[17]=[p(" Confirm ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})])),t.isInitiator?(s(),i("div",Ct,[t.signalingMode==="server"?(s(),i("div",_t,[e("div",It,[l(n(Pe),{class:Z(["w-6 h-6 text-primary",t.isServerConnecting?"":"animate-pulse"])},null,8,["class"])]),e("div",$t,[a[18]||(a[18]=e("h3",{class:"font-black text-primary text-xs uppercase tracking-widest"},"Active Discovery Broadcast",-1)),a[19]||(a[19]=e("p",{class:"text-[10px] text-white/30 uppercase tracking-widest"},"Lobby is visible on global discovery mesh.",-1)),!t.signalingClient?.isConnected&&!t.isServerConnecting?(s(),i("p",At," Link Lost: Discovery Offline ")):u("",!0)])])):u("",!0),t.signalingMode==="manual"&&t.pendingSignaling.length>0?(s(),i("div",St,[a[20]||(a[20]=e("h3",{class:"text-[11px] font-black text-white/20 uppercase tracking-[0.3em] px-1"},"Pending Link Authentications",-1)),e("div",Pt,[(s(!0),i(_,null,ee(t.pendingSignaling,x=>(s(),b(Q,{key:x.id,connection:x,onOfferChange:t.onUpdateOffer,onAnswerChange:t.onUpdateAnswer,onCancel:t.onCancelSignaling},null,8,["connection","onOfferChange","onAnswerChange","onCancel"]))),128))])])):u("",!0)])):u("",!0),!t.isInitiator&&o.value&&t.signalingMode==="manual"&&t.pendingSignaling.length>0?(s(),i("div",Gt,[l(Q,{connection:t.pendingSignaling[0],onOfferChange:t.onUpdateOffer,onAnswerChange:t.onUpdateAnswer,onCancel:t.onCancelSignaling},null,8,["connection","onOfferChange","onAnswerChange","onCancel"])])):u("",!0)])):u("",!0),!r.value&&!o.value&&!c.value&&!g.value?(s(),i("div",Lt,[a[21]||(a[21]=fe('<div class="relative" data-v-ecdf0341><div class="h-20 w-20 bg-white/5 rounded-full flex items-center justify-center transition-transform hover:scale-110 duration-500" data-v-ecdf0341><div class="h-4 w-4 bg-white/10 rounded-full animate-ping" data-v-ecdf0341></div></div></div><div class="text-center space-y-2" data-v-ecdf0341><div class="text-xs font-black uppercase tracking-[0.5em] text-white/30" data-v-ecdf0341>Null Reference: No Active Session</div><p class="text-[10px] text-white/20 uppercase tracking-widest px-10 leading-relaxed font-medium" data-v-ecdf0341>Session data not found on current node. Return to discovery mesh.</p></div>',2)),e("button",{onClick:a[3]||(a[3]=(...x)=>t.onBackToLobby&&t.onBackToLobby(...x)),class:"h-12 px-8 rounded-xl border border-white/10 text-white/70 hover:text-primary hover:border-primary/40 font-black uppercase tracking-widest text-[10px] transition-all"}," Return to Discovery ")])):u("",!0)]))}}),Ft=w(Rt,[["__scopeId","data-v-ecdf0341"]]),Bt={class:"react-wrapper-root"},Tt={key:1,class:"p-20 text-center text-white/10 uppercase font-black tracking-[0.5em] animate-pulse"},jt=y({__name:"ReactComponentWrapper",props:{component:{},componentProps:{}},setup(t){const d=t,c=be(null);return ve(()=>d.component,r=>{if(r)try{const o=ye(r);c.value=we(o)}catch(o){console.error("[ReactComponentWrapper] Failed to apply React in Vue:",o),c.value=null}else c.value=null},{immediate:!0}),te(()=>{c.value=null}),(r,o)=>(s(),i("div",Bt,[c.value?(s(),b(ke(c.value),Ce(_e({key:0},t.componentProps)),null,16)):(s(),i("div",Tt," Initialising Game... "))]))}}),ne=w(jt,[["__scopeId","data-v-941e587e"]]),Ot={class:"animate-zoom-in"},zt=y({__name:"ActivePhase",props:{GameComponent:{},connectedPeers:{},playerInfos:{},isInitiator:{type:Boolean},ledger:{},onAddLedger:{type:Function},onFinishGame:{type:Function}},setup(t){const d=t,c=f(()=>({connections:d.connectedPeers,playerNames:d.playerInfos.map(r=>r.name),playerInfos:d.playerInfos,isInitiator:d.isInitiator,ledger:d.ledger,onAddLedger:d.onAddLedger,onFinishGame:d.onFinishGame}));return(r,o)=>(s(),i("div",Ot,[l(ne,{component:t.GameComponent,componentProps:c.value},null,8,["component","componentProps"])]))}}),Vt=w(zt,[["__scopeId","data-v-ba34ac07"]]),Nt={class:"space-y-6"},Ut={class:"opacity-80 pointer-events-none grayscale-[0.2]"},Dt={class:"glass-dark p-8 border border-white/5 shadow-glass-dark rounded-[2.5rem] animate-fade-in-up"},Mt={class:"flex flex-col md:flex-row items-center justify-between gap-6"},Et={class:"flex items-center gap-4"},Ht={class:"h-14 w-14 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20 shadow-neon"},Wt={class:"flex gap-4 w-full md:w-auto"},qt=y({__name:"FinishedPhase",props:{GameComponent:{},connectedPeers:{},playerInfos:{},isInitiator:{type:Boolean},ledger:{},onBackToLobby:{type:Function}},setup(t){const d=t,c=f(()=>({connections:d.connectedPeers,playerNames:d.playerInfos.map(r=>r.name),playerInfos:d.playerInfos,isInitiator:d.isInitiator,ledger:d.ledger,onAddLedger:()=>{},onFinishGame:()=>{}}));return(r,o)=>(s(),i("div",Nt,[e("div",Ut,[l(ne,{component:t.GameComponent,componentProps:c.value},null,8,["component","componentProps"])]),e("div",Dt,[e("div",Mt,[e("div",Et,[e("div",Ht,[l(n(S),{class:"w-8 h-8 text-primary"})]),o[1]||(o[1]=e("div",{class:"space-y-1"},[e("h3",{class:"text-xl font-black text-white uppercase tracking-tight"},"Match Finalized"),e("p",{class:"text-[10px] text-white/30 uppercase tracking-widest font-black"},"All cycles complete. Handshake terminated.")],-1))]),e("div",Wt,[e("button",{onClick:o[0]||(o[0]=(...g)=>t.onBackToLobby&&t.onBackToLobby(...g)),class:"w-full md:w-56 h-14 rounded-2xl bg-primary text-primary-foreground shadow-neon hover:shadow-[0_0_30px_rgba(16,185,129,0.4)] font-black uppercase tracking-[0.3em] text-xs transition-all"}," Return to Discovery ")])])]),o[2]||(o[2]=e("div",{class:"text-center text-white/10 text-[9px] font-black uppercase tracking-[0.4em] italic pt-4"}," Node state captured. Verification record locked inside vault. ",-1))]))}}),Jt=w(qt,[["__scopeId","data-v-5868591e"]]),Yt={class:"glass-dark p-8 rounded-[2rem] border border-white/5 shadow-glass-dark"},Kt={class:"text-xs font-black uppercase tracking-[0.3em] text-white/40 mb-6 flex items-center gap-3"},Qt={class:"space-y-4"},Xt={class:"relative"},Zt={key:0,class:"absolute inset-0 h-3 w-3 bg-primary rounded-full animate-ping opacity-50"},en={class:"flex flex-col"},tn={class:"text-sm font-black text-white uppercase tracking-tight"},nn={key:0,class:"text-primary font-black ml-1"},sn={class:"text-[9px] text-white/30 uppercase tracking-[0.2em] font-bold"},on={key:0,class:"ml-auto flex items-center gap-3"},an=["onClick"],rn={key:1,class:"ml-auto"},ln={key:0,class:"text-[10px] text-white/20 uppercase font-black tracking-[0.3em] text-center py-6 animate-pulse"},dn=y({__name:"Players",props:{players:{},onRemove:{type:Function}},setup(t){return(d,c)=>(s(),i("div",Yt,[e("h3",Kt,[l(n(R),{class:"w-5 h-5 text-primary"}),p(" Dwellers In Lobby ("+h(t.players.length)+") ",1)]),e("div",Qt,[(s(!0),i(_,null,ee(t.players,r=>(s(),i("div",{key:r.id,class:"flex items-center gap-4 p-4 rounded-2xl bg-white/5 border border-white/10 group hover:neon-border transition-all duration-500 animate-fade-in-left"},[e("div",Xt,[e("div",{class:Z(["h-3 w-3 rounded-full",r.isConnected?"bg-primary shadow-neon":"bg-rose-500 shadow-[0_0_15px_rgba(244,63,94,0.4)]"])},null,2),r.isConnected?(s(),i("div",Zt)):u("",!0)]),e("div",en,[e("span",tn,[p(h(r.name)+" ",1),r.isLocal?(s(),i("span",nn,"(LOCAL)")):u("",!0)]),e("span",sn,h(r.status),1)]),r.isConnected?u("",!0):(s(),i("div",on,[c[0]||(c[0]=e("span",{class:"text-[9px] text-rose-500 font-black uppercase tracking-widest"},"Node Disconnected",-1)),t.onRemove&&!r.isLocal?(s(),i("button",{key:0,class:"h-8 w-8 flex items-center justify-center text-rose-500 hover:text-rose-400 hover:bg-rose-500/10 transition-colors border border-transparent hover:border-rose-500/30 rounded-xl",onClick:o=>t.onRemove(r.id),title:"Sever entry"},[l(n(Re),{class:"w-4 h-4"})],8,an)):u("",!0)])),r.isConnected&&r.isLocal?(s(),i("div",rn,[...c[1]||(c[1]=[e("span",{class:"text-[9px] text-primary font-black uppercase tracking-widest px-2 py-0.5 border border-primary/20 rounded-md"},"Authorized",-1)])])):u("",!0)]))),128)),t.players.length===0?(s(),i("p",ln," Scanning for incoming nodes... ")):u("",!0)])]))}}),cn=w(dn,[["__scopeId","data-v-de8606a7"]]),un={class:"min-h-screen bg-background"},pn={key:0,class:"max-w-7xl mx-auto p-6 space-y-12"},mn={class:"text-3xl font-black tracking-tighter uppercase text-white"},gn={class:"text-gradient"},xn={class:"animate-fade-in-up"},hn={class:"mt-12 max-w-2xl"},fn={key:1,class:"p-10 text-center text-white/50 uppercase font-black tracking-widest"},bn=y({__name:"BoardView",setup(t){const d=Ie(),c=f(()=>d.params.gameId),r=f(()=>d.params.boardId),o=f(()=>Ae(c.value||"")),{signalingMode:g,signalingClient:F,isServerConnecting:a,onBackToDiscovery:x}=Ge(),P=()=>x(c.value),{snapshot:k,send:G,playerInfos:I,connectedPeers:se,pendingSignaling:oe,isInitiator:$,isGameStarted:B,onHostAGame:T,updateOffer:ae,updateAnswer:ie,startGame:re,onFinishGame:le,onAddLedger:de,onAcceptGuest:ce,onRejectGuest:ue,onCancelSignaling:pe,onBackToGames:me}=Le(),j=f(()=>se.value),ge=()=>{me(),P()},O=f(()=>k.value?.matches("finished")||!1),xe=f(()=>!B.value&&!O.value),z=v=>{xe.value&&(v.preventDefault(),v.returnValue="")};return $e(()=>{if(r.value&&k.value?.matches("idle")){const v=parseInt(d.query.maxPlayers)||2;console.log("[BOARDVIEW] Initializing HOST state for boardId:",r.value,"maxPlayers:",v),G({type:"HOST",maxPlayers:v,boardId:r.value});for(let C=0;C<v-1;C++)setTimeout(()=>T(),100*(C+1))}window.addEventListener("beforeunload",z)}),te(()=>{window.removeEventListener("beforeunload",z)}),(v,C)=>(s(),i("div",un,[o.value?(s(),i("div",pn,[e("h1",mn,[C[0]||(C[0]=p(" Lobby: ",-1)),e("span",gn,h(o.value.name),1)]),e("div",xn,[O.value?(s(),b(Jt,{key:0,GameComponent:o.value.component,connectedPeers:j.value,playerInfos:n(I),isInitiator:n($),ledger:n(k)?.context?.ledger||[],onBackToLobby:P},null,8,["GameComponent","connectedPeers","playerInfos","isInitiator","ledger"])):n(B)?(s(),b(Vt,{key:1,GameComponent:o.value.component,connectedPeers:j.value,playerInfos:n(I),isInitiator:n($),ledger:n(k)?.context?.ledger||[],onAddLedger:n(de),onFinishGame:n(le)},null,8,["GameComponent","connectedPeers","playerInfos","isInitiator","ledger","onAddLedger","onFinishGame"])):(s(),b(Ft,{key:2,state:n(k),isInitiator:n($),signalingMode:n(g),isServerConnecting:n(a),signalingClient:n(F),pendingSignaling:n(oe),onStartGame:n(re),onHostAGame:n(T),onUpdateOffer:n(ae),onUpdateAnswer:n(ie),onCloseSession:ge,onBackToLobby:P,onAcceptGuest:n(ce),onRejectGuest:n(ue),onCancelSignaling:n(pe),onRemovePlayer:L=>n(G)({type:"REMOVE_PLAYER",playerId:L}),playerCount:n(I).length,maxPlayers:n(k)?.context?.maxPlayers||2,boardId:r.value},null,8,["state","isInitiator","signalingMode","isServerConnecting","signalingClient","pendingSignaling","onStartGame","onHostAGame","onUpdateOffer","onUpdateAnswer","onAcceptGuest","onRejectGuest","onCancelSignaling","onRemovePlayer","playerCount","maxPlayers","boardId"])),e("div",hn,[l(cn,{players:n(I),onRemove:n($)?L=>n(G)({type:"REMOVE_PLAYER",playerId:L}):void 0},null,8,["players","onRemove"])])])])):(s(),i("div",fn," Game not found in grid. "))]))}}),In=w(bn,[["__scopeId","data-v-71dc1ce7"]]);export{In as default};
